Version 4
SHEET 1 6124 2336
WIRE 1664 -1568 1472 -1568
WIRE 2272 -1536 2240 -1536
WIRE 2384 -1536 2352 -1536
WIRE 2512 -1536 2464 -1536
WIRE 2560 -1536 2512 -1536
WIRE 2880 -1536 2848 -1536
WIRE 2992 -1536 2960 -1536
WIRE 3648 -1536 3072 -1536
WIRE 2560 -1520 2560 -1536
WIRE 1488 -1472 1472 -1472
WIRE 1568 -1472 1552 -1472
WIRE 1664 -1472 1664 -1568
WIRE 1664 -1472 1648 -1472
WIRE 1760 -1472 1664 -1472
WIRE 1856 -1472 1840 -1472
WIRE 1952 -1472 1856 -1472
WIRE 2880 -1440 2848 -1440
WIRE 2992 -1440 2960 -1440
WIRE 3360 -1440 3072 -1440
WIRE 2560 -1424 2560 -1440
WIRE 1664 -1376 1664 -1472
WIRE 1680 -1376 1664 -1376
WIRE 1760 -1376 1744 -1376
WIRE 1856 -1376 1856 -1472
WIRE 1856 -1376 1840 -1376
WIRE 2880 -1344 2848 -1344
WIRE 2992 -1344 2960 -1344
WIRE 3360 -1344 3360 -1360
WIRE 3360 -1344 3072 -1344
WIRE 2272 -1328 2240 -1328
WIRE 2384 -1328 2352 -1328
WIRE 2512 -1328 2464 -1328
WIRE 2560 -1328 2560 -1344
WIRE 2560 -1328 2512 -1328
WIRE 2880 -1248 2848 -1248
WIRE 2992 -1248 2960 -1248
WIRE 3360 -1248 3360 -1264
WIRE 3360 -1248 3072 -1248
WIRE 2864 -1152 2848 -1152
WIRE 2880 -1152 2864 -1152
WIRE 2992 -1152 2960 -1152
WIRE 3168 -1152 3072 -1152
WIRE 1184 -1056 704 -1056
WIRE 1376 -1056 1184 -1056
WIRE 1568 -1056 1376 -1056
WIRE 1760 -1056 1568 -1056
WIRE 1856 -1056 1760 -1056
WIRE 2864 -1056 2864 -1152
WIRE 2880 -1056 2864 -1056
WIRE 2992 -1056 2960 -1056
WIRE 3168 -1056 3168 -1152
WIRE 3168 -1056 3072 -1056
WIRE 3360 -1056 3360 -1168
WIRE 3360 -1056 3168 -1056
WIRE 512 -1040 512 -1056
WIRE 704 -1040 704 -1056
WIRE 1184 -1040 1184 -1056
WIRE 2864 -960 2864 -1056
WIRE 2880 -960 2864 -960
WIRE 2992 -960 2960 -960
WIRE 3168 -960 3168 -1056
WIRE 3168 -960 3072 -960
WIRE 3360 -960 3360 -976
WIRE 3360 -960 3264 -960
WIRE 320 -944 320 -960
WIRE 416 -944 416 -960
WIRE 512 -944 512 -960
WIRE 2560 -928 2544 -928
WIRE 2576 -928 2560 -928
WIRE 2560 -912 2560 -928
WIRE 1184 -864 1184 -960
WIRE 1184 -864 1088 -864
WIRE 1568 -864 1568 -1056
WIRE 1760 -864 1760 -1056
WIRE 1776 -864 1760 -864
WIRE 1856 -864 1840 -864
WIRE 2880 -864 2848 -864
WIRE 2992 -864 2960 -864
WIRE 3264 -864 3072 -864
WIRE 3360 -864 3360 -960
WIRE 3360 -864 3344 -864
WIRE 3376 -864 3360 -864
WIRE 3648 -864 3648 -1536
WIRE 3648 -864 3456 -864
WIRE 224 -848 224 -960
WIRE 320 -848 320 -864
WIRE 416 -848 416 -864
WIRE 512 -848 512 -864
WIRE 2560 -816 2560 -832
WIRE 2560 -800 2560 -816
WIRE 1760 -768 1760 -864
WIRE 1776 -768 1760 -768
WIRE 1856 -768 1840 -768
WIRE 224 -752 224 -768
WIRE 320 -752 320 -768
WIRE 416 -752 416 -768
WIRE 512 -752 512 -768
WIRE 1568 -752 1568 -864
WIRE 2464 -720 2464 -928
WIRE 2656 -720 2656 -928
WIRE 1184 -672 1184 -784
WIRE 1296 -672 1184 -672
WIRE 1472 -672 1376 -672
WIRE 1520 -672 1472 -672
WIRE 1472 -656 1472 -672
WIRE 1184 -624 1184 -672
WIRE 704 -576 704 -960
WIRE 896 -576 704 -576
WIRE 1472 -576 1472 -592
WIRE 1472 -576 1248 -576
WIRE 1568 -576 1568 -656
WIRE 1568 -576 1472 -576
WIRE 2240 -576 2144 -576
WIRE 704 -560 704 -576
WIRE 896 -560 896 -576
WIRE 1568 -480 1568 -576
WIRE 2144 -480 2144 -576
WIRE 2240 -480 2144 -480
WIRE 2336 -480 2320 -480
WIRE 3072 -480 3072 -864
WIRE 3280 -480 3072 -480
WIRE 3360 -480 3360 -864
WIRE 3360 -480 3344 -480
WIRE 3376 -480 3360 -480
WIRE 3648 -480 3648 -864
WIRE 3648 -480 3440 -480
WIRE 1088 -464 1088 -864
WIRE 704 -432 704 -480
WIRE 896 -432 896 -480
WIRE 320 -384 320 -480
WIRE 336 -384 320 -384
WIRE 432 -384 416 -384
WIRE 512 -384 496 -384
WIRE 608 -384 512 -384
WIRE 640 -384 608 -384
WIRE 992 -384 960 -384
WIRE 1088 -384 1088 -400
WIRE 1344 -384 1088 -384
WIRE 1568 -384 1568 -400
WIRE 1568 -384 1344 -384
WIRE 1680 -384 1568 -384
WIRE 1760 -384 1680 -384
WIRE 1856 -384 1840 -384
WIRE 2144 -384 2144 -480
WIRE 2144 -384 2128 -384
WIRE 2240 -384 2144 -384
WIRE 2336 -384 2336 -480
WIRE 2336 -384 2320 -384
WIRE 2352 -384 2336 -384
WIRE 3072 -384 3072 -480
WIRE 3072 -384 2976 -384
WIRE 3168 -384 3072 -384
WIRE 3264 -384 3168 -384
WIRE 3552 -384 3456 -384
WIRE 3648 -384 3648 -480
WIRE 3648 -384 3552 -384
WIRE 3744 -384 3648 -384
WIRE 320 -368 320 -384
WIRE 512 -368 512 -384
WIRE 608 -368 608 -384
WIRE 2144 -368 2144 -384
WIRE 2976 -368 2976 -384
WIRE 3072 -368 3072 -384
WIRE 3168 -368 3168 -384
WIRE 3264 -368 3264 -384
WIRE 3456 -368 3456 -384
WIRE 3552 -368 3552 -384
WIRE 3648 -368 3648 -384
WIRE 3744 -368 3744 -384
WIRE 1184 -288 1184 -528
WIRE 1568 -288 1568 -304
WIRE 1568 -288 1184 -288
WIRE 2976 -288 2976 -304
WIRE 3072 -288 3072 -304
WIRE 3072 -288 2976 -288
WIRE 3168 -288 3168 -304
WIRE 3264 -288 3264 -304
WIRE 3264 -288 3168 -288
WIRE 3456 -288 3456 -304
WIRE 3552 -288 3552 -304
WIRE 3552 -288 3456 -288
WIRE 3648 -288 3648 -304
WIRE 3744 -288 3744 -304
WIRE 3744 -288 3648 -288
WIRE 320 -272 320 -288
WIRE 512 -272 512 -304
WIRE 608 -272 608 -288
WIRE 1088 -272 1088 -384
WIRE 2144 -272 2144 -288
WIRE 2144 -192 2144 -208
WIRE 3264 -192 3264 -288
WIRE 3264 -192 3168 -192
WIRE 3456 -192 3456 -288
WIRE 3456 -192 3264 -192
WIRE 1280 -144 1280 -192
WIRE 704 -96 704 -336
WIRE 1088 -96 1088 -208
WIRE 1088 -96 704 -96
WIRE 1216 -96 1088 -96
WIRE 3072 -96 3072 -288
WIRE 3552 -96 3072 -96
WIRE 3648 -96 3648 -288
WIRE 3648 -96 3552 -96
WIRE 3168 0 3168 -192
WIRE 3280 0 3168 0
WIRE 3360 0 3360 -480
WIRE 3360 0 3344 0
WIRE 3376 0 3360 0
WIRE 3552 0 3552 -96
WIRE 3552 0 3440 0
WIRE 1568 16 1568 -288
WIRE 1280 32 1280 -48
WIRE 896 96 896 -336
WIRE 896 96 800 96
WIRE 1280 96 1280 32
WIRE 1296 96 1280 96
WIRE 1472 96 1376 96
WIRE 1520 96 1472 96
WIRE 1776 96 1760 96
WIRE 1856 96 1840 96
WIRE 3168 96 3168 0
WIRE 3376 96 3168 96
WIRE 3552 96 3552 0
WIRE 3552 96 3440 96
WIRE 704 144 704 -96
WIRE 896 144 896 96
WIRE 800 192 800 96
WIRE 800 192 768 192
WIRE 832 192 800 192
WIRE 1760 192 1760 96
WIRE 1776 192 1760 192
WIRE 1856 192 1840 192
WIRE 2304 192 2288 192
WIRE 2400 192 2384 192
WIRE 3168 192 3168 96
WIRE 3264 192 3168 192
WIRE 3360 192 3360 0
WIRE 3360 192 3344 192
WIRE 3376 192 3360 192
WIRE 3552 192 3552 96
WIRE 3552 192 3456 192
WIRE 704 288 704 240
WIRE 896 288 896 240
WIRE 1280 288 1280 96
WIRE 2208 288 2208 192
WIRE 2304 288 2304 192
WIRE 2400 288 2400 192
WIRE 1472 304 1472 96
WIRE 704 384 704 368
WIRE 896 384 896 368
WIRE 896 384 704 384
WIRE 1280 384 1280 368
WIRE 1280 384 896 384
WIRE 1472 384 1472 368
WIRE 1472 384 1280 384
WIRE 1568 384 1568 112
WIRE 1568 384 1472 384
WIRE 1664 384 1568 384
WIRE 1760 384 1760 192
WIRE 1760 384 1664 384
WIRE 1856 384 1760 384
FLAG 1856 -1056 vcc+
IOPIN 1856 -1056 In
FLAG 2560 -928 x
FLAG 1856 384 vcc-
IOPIN 1856 384 In
FLAG 2240 -576 out
IOPIN 2240 -576 Out
FLAG 1472 -1568 nfb
IOPIN 1472 -1568 Out
FLAG 992 -384 nfb
IOPIN 992 -384 In
FLAG 2560 -816 xp
FLAG 2144 -192 pwrgnd
IOPIN 2144 -192 In
FLAG 512 -272 sgnd
IOPIN 512 -272 In
FLAG 608 -272 sgnd
IOPIN 608 -272 In
FLAG 1472 -1472 sgnd
IOPIN 1472 -1472 In
FLAG 224 -752 sgnd
IOPIN 224 -752 In
FLAG 224 -960 sinus
IOPIN 224 -960 Out
FLAG 2848 -1536 vcc+
IOPIN 2848 -1536 Out
FLAG 2848 -864 vcc-
IOPIN 2848 -864 Out
FLAG 2848 -1344 gspk
IOPIN 2848 -1344 Out
FLAG 2848 -1248 pgnd
IOPIN 2848 -1248 Out
FLAG 2848 -1440 sgnd
IOPIN 2848 -1440 Out
FLAG 1952 -1472 out
IOPIN 1952 -1472 In
FLAG 2432 -384 SPKP
IOPIN 2432 -384 Out
FLAG 2240 -1328 gspk
IOPIN 2240 -1328 In
FLAG 2240 -1536 SPKP
IOPIN 2240 -1536 In
FLAG 2848 -1152 pwrgnd
IOPIN 2848 -1152 Out
FLAG 320 -960 impulse
IOPIN 320 -960 Out
FLAG 3264 -960 0
FLAG 2464 -720 AC1
IOPIN 2464 -720 BiDir
FLAG 2656 -720 AC2
IOPIN 2656 -720 BiDir
FLAG 1856 -384 AC1
IOPIN 1856 -384 BiDir
FLAG 2048 -384 AC2
IOPIN 2048 -384 BiDir
FLAG 2560 -720 pwrgnd
IOPIN 2560 -720 In
FLAG 2512 -1536 SPK+
FLAG 2512 -1328 SPK-
FLAG 416 -960 imd
IOPIN 416 -960 Out
FLAG 1856 -768 pwrgnd
IOPIN 1856 -768 In
FLAG 1856 96 pwrgnd
IOPIN 1856 96 In
FLAG 320 -752 sgnd
IOPIN 320 -752 In
FLAG 416 -752 sgnd
IOPIN 416 -752 In
FLAG 1344 -384 preout
FLAG 1280 -192 pgnd
IOPIN 1280 -192 Out
FLAG 320 -272 sgnd
IOPIN 320 -272 In
FLAG 1856 192 pwrgnd
IOPIN 1856 192 In
FLAG 1856 -864 pwrgnd
IOPIN 1856 -864 In
FLAG 512 -1056 stability
IOPIN 512 -1056 Out
FLAG 512 -752 sgnd
IOPIN 512 -752 In
FLAG 2208 288 sgnd
IOPIN 2208 288 In
FLAG 2304 288 pgnd
IOPIN 2304 288 In
FLAG 2400 288 pwrgnd
IOPIN 2400 288 In
FLAG 320 -480 sinus
IOPIN 320 -480 Out
DATAFLAG 1376 -1056 ""
DATAFLAG 1664 384 ""
DATAFLAG 1680 -384 ""
DATAFLAG 1568 -864 "Id(M2)"
DATAFLAG 1280 32 "Ic(Q3)"
SYMBOL res 1664 -1488 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {nfb1}
SYMBOL current 2560 -832 R180
WINDOW 0 24 77 Left 2
WINDOW 3 24 0 Invisible 2
WINDOW 123 -71 178 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii
SYMATTR Value 0
SYMATTR Value2 AC {u(prb)}
SYMBOL voltage 2560 -928 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 Invisible 2
WINDOW 123 -97 96 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi
SYMATTR Value 0
SYMATTR Value2 AC {u(-prb)}
SYMBOL pnp 640 -336 M180
WINDOW 0 77 84 Left 2
WINDOW 3 75 52 Left 2
SYMATTR InstName Q11
SYMATTR Value CA_BC560C
SYMBOL res 432 -400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R33
SYMATTR Value {nfb1}
SYMBOL res 592 -384 R0
SYMATTR InstName R34
SYMATTR Value {nfb2}
SYMBOL res 688 272 R0
SYMATTR InstName R2
SYMATTR Value 240
SYMBOL res 880 272 R0
SYMATTR InstName R3
SYMATTR Value 240
SYMBOL res 688 -576 R0
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL res 880 -576 R0
SYMATTR InstName R10
SYMATTR Value 100
SYMBOL res 1168 -1056 R0
SYMATTR InstName R16
SYMATTR Value 470
SYMBOL res 2224 -368 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 2.2
SYMBOL res 1856 -1488 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value {nfb2}
SYMBOL voltage 2560 -928 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL res 2128 -384 R0
SYMATTR InstName R54
SYMATTR Value 10
SYMBOL res 2544 -1536 R0
SYMATTR InstName R60
SYMATTR Value {Zreal}
SYMBOL ind 2544 -1440 R0
SYMATTR InstName L19
SYMATTR Value {Zimg}
SYMATTR SpiceLine Cpar=10p
SYMBOL voltage 2560 -816 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value 0
SYMATTR InstName V18
SYMBOL cap 1776 -784 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C20
SYMATTR Value 100n
SYMATTR SpiceLine Rser=300m Lser=3n Rpar=4.4meg Cpar=1p
SYMBOL cap 2128 -272 R0
SYMATTR InstName C24
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL polcap 1552 -1488 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 2.2m
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=3310k Cpar=3p mfg="Nichicon" pn="UPW0J222MPD6TD" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 688 -1056 R0
SYMATTR InstName R47
SYMATTR Value 1k8
SYMBOL ind2 2864 -1520 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVCC
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -848 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVEE
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL voltage 224 -864 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {vinput} {freq} 0 0 0)
SYMATTR InstName V11
SYMBOL pnp 960 -336 R180
WINDOW 0 77 84 Left 2
WINDOW 3 75 52 Left 2
SYMATTR InstName Q7
SYMATTR Value CA_BC560C
SYMBOL ind2 2864 -1328 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LGSPK2
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1040 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND2
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1232 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1424 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 25m
SYMBOL res 3088 -1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 25m
SYMBOL res 3088 -1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 25m
SYMBOL res 3088 -1264 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 25m
SYMBOL res 3088 -1456 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 25m
SYMBOL res 3088 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 25m
SYMBOL ind 3344 -1072 R0
SYMATTR InstName L4
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1264 R0
SYMATTR InstName L5
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1360 R0
SYMATTR InstName L6
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1456 R0
SYMATTR InstName L18
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind2 2256 -1520 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKP
SYMATTR Value {con2_len*20n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2256 -1312 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKN2
SYMATTR Value {con2_len*20n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL res 2448 -400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R39
SYMATTR Value 20m
SYMBOL res 2480 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R41
SYMATTR Value 15m
SYMBOL res 2480 -1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 15m
SYMBOL ind2 2864 -944 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LDGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 25m
SYMBOL ind2 2864 -1136 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND1
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 25m
SYMBOL voltage 320 -864 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {vinput/2} 1u 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V7
SYMBOL voltage 320 -960 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {-vinput/2} {1u+(1/(freq*2))} 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V8
SYMBOL polcap 432 -400 M90
WINDOW 3 32 32 VTop 2
WINDOW 0 0 32 VBottom 2
SYMATTR Value 220µ
SYMATTR InstName C11
SYMATTR SpiceLine V=6.3 Irms=290m Rser=0.5 Lser=3n Rpar=2100k Cpar=3p mfg="Nichicon" pn="UPW0J221MED1TD" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL voltage 1744 -384 R270
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL voltage 2144 -384 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 0
SYMBOL voltage 416 -864 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/2} 19k)
SYMATTR InstName V9
SYMBOL voltage 416 -960 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/2} 20k 0 0)
SYMATTR InstName V10
SYMBOL res 1856 -1392 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value {nfb2*2}
SYMBOL res 1552 -496 R0
SYMATTR InstName R14
SYMATTR Value 0.62
SYMBOL res 1168 -880 R0
SYMATTR InstName R4
SYMATTR Value 470
SYMBOL polcap 1072 -464 R0
SYMATTR Value 1m
SYMATTR InstName C1
SYMATTR SpiceLine V=6.3 Irms=290m Rser=0.5 Lser=3n Rpar=1100k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL nmos 1520 16 R0
SYMATTR InstName M1
SYMATTR Value IRF530
SYMBOL nmos 1520 -752 R0
SYMATTR InstName M2
SYMATTR Value IRF530
SYMBOL res 1392 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL res 1264 272 R0
SYMATTR InstName R1
SYMATTR Value 510
SYMBOL res 1392 -688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL cap 1744 -1392 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 18p
SYMATTR SpiceLine Rser=.18 Lser=5n Rpar=5meg
SYMBOL zener 1456 368 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value BZX84C12L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1072 -272 R0
SYMATTR InstName C3
SYMATTR Value 100p
SYMATTR SpiceLine Rser=.3 Lser=6n Rpar=3.9meg Cpar=1p
SYMBOL res 3360 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 3472 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL cap 496 -304 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C22
SYMATTR Value 1n
SYMATTR SpiceLine Rser=.15 Lser=5n Rpar=3meg Cpar=2p
SYMBOL npn 832 144 R0
SYMATTR InstName Q9
SYMATTR Value CA_BC550C
SYMBOL npn 768 144 M0
SYMATTR InstName Q10
SYMATTR Value CA_BC550C
SYMBOL res 304 -384 R0
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL cap 1776 80 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C19
SYMATTR Value 100n
SYMATTR SpiceLine Rser=300m Lser=3n Rpar=4.4meg Cpar=1p
SYMBOL cap 1776 176 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C25
SYMATTR Value 22µ
SYMATTR SpiceLine Rser=80m Lser=6n Rpar=4.4meg Cpar=1p
SYMBOL cap 1776 -880 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C26
SYMATTR Value 22µ
SYMATTR SpiceLine Rser=80m Lser=6n Rpar=4.4meg Cpar=1p
SYMBOL voltage 512 -1056 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {7*vinput/8} {freq} 0 0 0)
SYMATTR InstName V13
SYMBOL voltage 512 -960 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {-vinput/8} {1u+(1/(freq*80))} 1n 1n {1/(freq*80)} {1/(freq*40)})
SYMATTR InstName V5
SYMBOL voltage 512 -864 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {vinput/8} 1u 1n 1n {1/(freq*80)} {1/(freq*40)})
SYMATTR InstName V12
SYMBOL res 2304 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 10
SYMBOL res 2400 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R35
SYMATTR Value 1
SYMBOL zener 1456 -592 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value BZX84C12L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL npn 1216 -144 R0
SYMATTR InstName Q1
SYMATTR Value CA_BC550C
SYMBOL npn 1248 -624 M0
SYMATTR InstName Q2
SYMATTR Value CA_BC550C
SYMBOL res 1552 -400 R0
SYMATTR InstName R6
SYMATTR Value 0.62
SYMBOL ind2 2224 -464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVCC1
SYMATTR Value 2.2µ
SYMATTR SpiceLine Rser=50m
SYMATTR Type ind
SYMBOL voltage 3472 192 R90
WINDOW 123 0 0 Left 2
WINDOW 3 -94 177 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rser}
SYMATTR InstName V14
SYMBOL voltage 3360 192 M270
WINDOW 123 24 -12 Left 2
WINDOW 3 -96 -62 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rser}
SYMATTR InstName V15
SYMBOL cap 3280 -16 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL polcap 3344 -496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 10m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.024 Lser=89n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL schottky 3440 -304 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -113 -33 Left 2
SYMATTR InstName D3
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3056 -368 R0
WINDOW 3 -110 96 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D4
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3632 -304 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -114 -32 Left 2
SYMATTR InstName D5
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3248 -368 R0
WINDOW 3 -111 97 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D6
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 2960 -368 R0
SYMATTR InstName C10
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3152 -368 R0
SYMATTR InstName C12
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3728 -368 R0
SYMATTR InstName C13
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3536 -368 R0
SYMATTR InstName C14
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3376 -16 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C15
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3376 80 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C16
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL polcap 3440 -496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 10m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.024 Lser=89n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
TEXT 688 -1488 Left 2 !;op
TEXT -16 -1344 Left 2 !.option plotwinsize=0
TEXT -16 -1312 Left 2 !.option noopiter
TEXT -16 -1616 Left 2 ;Transient
TEXT -16 -1456 Left 2 !.four {freq} 10 10 v(SPK+,SPK-)
TEXT 688 -1520 Left 2 !.param prb=0
TEXT -16 -1520 Left 2 !.param timestep {1/((262144/8)*freq)}
TEXT -16 -1552 Left 2 !.param freq 20k
TEXT -16 -1488 Left 2 !.param stoptime {iterations/freq}
TEXT 688 -1584 Left 2 !;ac oct 100 10 100meg
TEXT 688 -1552 Left 2 ;.step param prb list -1 1
TEXT 688 -1616 Left 2 ;AC analysis
TEXT -16 -1424 Left 2 !.param iterations 80
TEXT 320 -1280 Left 2 !.lib usr/ONNN_BJT.lib
TEXT 688 -1280 Left 2 !.param Zimp 8
TEXT 2096 -1184 Left 2 !.param Zreal Zimp/sqrt(2)
TEXT 2096 -1152 Left 2 !.param Zimg (Zimp/sqrt(2))/(2*pi*freq)
TEXT 688 -1248 Left 2 !.param supplyPWR 25
TEXT 688 -1216 Left 2 !.param supplyVLT 9
TEXT 320 -1216 Left 2 !.lib usr/STM_D.lib
TEXT 320 -1312 Left 2 !.lib usr/FCS_BJT.lib
TEXT 688 -1312 Left 2 !.param voutput 8
TEXT 688 -1184 Left 2 !.param supplyK 0.11
TEXT -16 -1584 Left 2 !.tran 0 {stoptime} 0 {timestep}
TEXT 1040 -1312 Left 2 !.param con1_len 10
TEXT 2736 256 Left 2 !KCON1 LVCC LSGND LGSPK2 LPGND LPWRGND1 LPWRGND2 LVEE LDGND 0.8
TEXT 1040 -1280 Left 2 !.param con2_len 10
TEXT 2096 -1216 Left 2 !KCON2 LSPKP LSPKN2 0.8
TEXT 2096 -1616 Left 2 ;Konektor zvucnika i zvucnik
TEXT 2752 -1616 Left 2 ;Konektor napajanja, star ground i napajanje
TEXT 1392 -1616 Left 2 ;Negativna povratna sprega
TEXT 688 -1344 Left 2 ;Ulazni parametri kola
TEXT 2560 -1072 Center 2 ;AC sonda
TEXT 320 -1344 Left 2 !.lib usr/FCS_D.lib
TEXT 1392 -1152 Left 2 !.param vinput voutput*(nfb1/nfb2)
TEXT 1040 -1216 Left 2 !.param nfb1 100
TEXT 1040 -1184 Left 2 !.param nfb2 1k5
TEXT 2728 288 Left 2 !.param rser {(supplyVLT*supplyVLT*supplyK)/supplyPWR}
TEXT 2728 320 Left 2 !.param phi 90
RECTANGLE Normal 640 -1632 -32 -1392
RECTANGLE Normal 640 -1152 -32 -1360
RECTANGLE Normal 1344 -1632 672 -1392
RECTANGLE Normal 2688 -1120 2080 -1632 2
RECTANGLE Normal 2688 -576 2432 -1088 2
RECTANGLE Normal 3088 -816 2864 -1584 2
RECTANGLE Normal 2480 -1280 2256 -1584 2
RECTANGLE Normal 2048 -1120 1376 -1632 2
RECTANGLE Normal 1344 -1360 672 -1152
RECTANGLE Normal 3808 352 2720 -1632 2
