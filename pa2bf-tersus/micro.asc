Version 4
SHEET 1 6124 2336
WIRE 2016 -1568 1824 -1568
WIRE 2880 -1536 2848 -1536
WIRE 2992 -1536 2960 -1536
WIRE 3648 -1536 3072 -1536
WIRE 1536 -1472 1520 -1472
WIRE 1552 -1472 1536 -1472
WIRE 1840 -1472 1824 -1472
WIRE 1920 -1472 1904 -1472
WIRE 2016 -1472 2016 -1568
WIRE 2016 -1472 2000 -1472
WIRE 2112 -1472 2016 -1472
WIRE 2208 -1472 2192 -1472
WIRE 2304 -1472 2288 -1472
WIRE 1536 -1456 1536 -1472
WIRE 2880 -1440 2848 -1440
WIRE 2992 -1440 2960 -1440
WIRE 3360 -1440 3072 -1440
WIRE 2016 -1376 2016 -1472
WIRE 2032 -1376 2016 -1376
WIRE 2112 -1376 2096 -1376
WIRE 2208 -1376 2208 -1472
WIRE 2208 -1376 2192 -1376
WIRE 1536 -1360 1536 -1376
WIRE 1536 -1344 1536 -1360
WIRE 2880 -1344 2848 -1344
WIRE 2992 -1344 2960 -1344
WIRE 3360 -1344 3360 -1360
WIRE 3360 -1344 3072 -1344
WIRE 1440 -1264 1440 -1472
WIRE 1632 -1264 1632 -1472
WIRE 2880 -1248 2848 -1248
WIRE 2992 -1248 2960 -1248
WIRE 3360 -1248 3360 -1264
WIRE 3360 -1248 3072 -1248
WIRE 2880 -1152 2848 -1152
WIRE 2992 -1152 2960 -1152
WIRE 3168 -1152 3072 -1152
WIRE 384 -1088 96 -1088
WIRE 768 -1088 384 -1088
WIRE 1248 -1088 768 -1088
WIRE 1344 -1088 1248 -1088
WIRE 1440 -1088 1344 -1088
WIRE 1536 -1088 1440 -1088
WIRE 96 -1072 96 -1088
WIRE 768 -1072 768 -1088
WIRE 2880 -1056 2848 -1056
WIRE 2992 -1056 2960 -1056
WIRE 3168 -1056 3168 -1152
WIRE 3168 -1056 3072 -1056
WIRE 3360 -1056 3360 -1168
WIRE 3360 -1056 3168 -1056
WIRE 384 -1040 384 -1088
WIRE 192 -992 96 -992
WIRE 320 -992 272 -992
WIRE 1440 -992 1440 -1088
WIRE 1456 -992 1440 -992
WIRE 1536 -992 1520 -992
WIRE 1920 -992 1888 -992
WIRE 2032 -992 2000 -992
WIRE 2256 -992 2112 -992
WIRE 2304 -992 2256 -992
WIRE 2880 -960 2848 -960
WIRE 2992 -960 2960 -960
WIRE 3168 -960 3168 -1056
WIRE 3168 -960 3072 -960
WIRE 3360 -960 3360 -976
WIRE 3360 -960 3264 -960
WIRE 96 -944 96 -992
WIRE 384 -896 384 -944
WIRE 384 -896 160 -896
WIRE 768 -896 768 -992
WIRE 768 -896 576 -896
WIRE 1440 -896 1440 -992
WIRE 1456 -896 1440 -896
WIRE 1536 -896 1520 -896
WIRE 2304 -896 2304 -992
WIRE 2880 -864 2848 -864
WIRE 2992 -864 2960 -864
WIRE 3264 -864 3072 -864
WIRE 3360 -864 3360 -960
WIRE 3360 -864 3344 -864
WIRE 3376 -864 3360 -864
WIRE 3648 -864 3648 -1536
WIRE 3648 -864 3456 -864
WIRE 384 -800 384 -896
WIRE 2304 -800 2304 -816
WIRE 3072 -768 3072 -864
WIRE 3280 -768 3072 -768
WIRE 3360 -768 3360 -864
WIRE 3360 -768 3344 -768
WIRE 3376 -768 3360 -768
WIRE 3648 -768 3648 -864
WIRE 3648 -768 3440 -768
WIRE 96 -704 96 -848
WIRE 384 -704 384 -720
WIRE 1920 -704 1888 -704
WIRE 2032 -704 2000 -704
WIRE 2256 -704 2112 -704
WIRE 2304 -704 2304 -720
WIRE 2304 -704 2256 -704
WIRE 1248 -688 1248 -1088
WIRE 3072 -672 3072 -768
WIRE 3280 -672 3072 -672
WIRE 3360 -672 3360 -768
WIRE 3360 -672 3344 -672
WIRE 3376 -672 3360 -672
WIRE 3648 -672 3648 -768
WIRE 3648 -672 3440 -672
WIRE 768 -608 768 -816
WIRE 864 -608 768 -608
WIRE 1072 -608 864 -608
WIRE 1200 -608 1152 -608
WIRE 3072 -576 3072 -672
WIRE 3280 -576 3072 -576
WIRE 3360 -576 3360 -672
WIRE 3360 -576 3344 -576
WIRE 3376 -576 3360 -576
WIRE 3648 -576 3648 -672
WIRE 3648 -576 3440 -576
WIRE 864 -560 864 -608
WIRE 96 -512 96 -704
WIRE 96 -512 0 -512
WIRE 192 -512 96 -512
WIRE 960 -512 928 -512
WIRE 1056 -512 960 -512
WIRE 1072 -512 1056 -512
WIRE 1248 -512 1248 -592
WIRE 1248 -512 1152 -512
WIRE -192 -496 -192 -512
WIRE 0 -496 0 -512
WIRE 192 -496 192 -512
WIRE 3072 -480 3072 -576
WIRE 3376 -480 3072 -480
WIRE 3648 -480 3648 -576
WIRE 3648 -480 3440 -480
WIRE -192 -416 -192 -432
WIRE 960 -416 960 -512
WIRE 1056 -416 1056 -512
WIRE 1072 -416 1056 -416
WIRE 1248 -416 1248 -512
WIRE 1248 -416 1136 -416
WIRE 576 -400 576 -896
WIRE 768 -400 768 -608
WIRE 3072 -384 3072 -480
WIRE 3280 -384 3072 -384
WIRE 3360 -384 3360 -576
WIRE 3360 -384 3344 -384
WIRE 3376 -384 3360 -384
WIRE 3648 -384 3648 -480
WIRE 3648 -384 3440 -384
WIRE 0 -368 0 -416
WIRE 192 -368 192 -416
WIRE -192 -320 -192 -336
WIRE -96 -320 -192 -320
WIRE -64 -320 -96 -320
WIRE 384 -320 256 -320
WIRE 576 -320 576 -336
WIRE 768 -320 768 -336
WIRE 768 -320 576 -320
WIRE 1152 -320 768 -320
WIRE 1248 -320 1248 -336
WIRE 1248 -320 1152 -320
WIRE 1360 -320 1248 -320
WIRE 1440 -320 1360 -320
WIRE 1536 -320 1520 -320
WIRE -192 -304 -192 -320
WIRE -96 -304 -96 -320
WIRE 1248 -304 1248 -320
WIRE 3072 -288 3072 -384
WIRE 3072 -288 2976 -288
WIRE 3168 -288 3072 -288
WIRE 3264 -288 3168 -288
WIRE 3552 -288 3456 -288
WIRE 3648 -288 3648 -384
WIRE 3648 -288 3552 -288
WIRE 3744 -288 3648 -288
WIRE 2976 -272 2976 -288
WIRE 3072 -272 3072 -288
WIRE 3168 -272 3168 -288
WIRE 3264 -272 3264 -288
WIRE 3456 -272 3456 -288
WIRE 3552 -272 3552 -288
WIRE 3648 -272 3648 -288
WIRE 3744 -272 3744 -288
WIRE 864 -224 864 -464
WIRE 960 -224 960 -336
WIRE 960 -224 864 -224
WIRE 1248 -224 960 -224
WIRE 2080 -224 2080 -416
WIRE 2080 -224 2064 -224
WIRE 2272 -224 2080 -224
WIRE 2288 -224 2272 -224
WIRE 2384 -224 2368 -224
WIRE -192 -208 -192 -240
WIRE -96 -208 -96 -224
WIRE 2080 -208 2080 -224
WIRE 2976 -192 2976 -208
WIRE 3072 -192 3072 -208
WIRE 3072 -192 2976 -192
WIRE 3168 -192 3168 -208
WIRE 3264 -192 3264 -208
WIRE 3264 -192 3168 -192
WIRE 3456 -192 3456 -208
WIRE 3552 -192 3552 -208
WIRE 3552 -192 3456 -192
WIRE 3648 -192 3648 -208
WIRE 3744 -192 3744 -208
WIRE 3744 -192 3648 -192
WIRE 2272 -128 2272 -224
WIRE 2288 -128 2272 -128
WIRE 2368 -128 2368 -224
WIRE 576 -112 576 -320
WIRE 2080 -112 2080 -128
WIRE 3264 -96 3264 -192
WIRE 3264 -96 3168 -96
WIRE 3456 -96 3456 -192
WIRE 3456 -96 3264 -96
WIRE 2080 -32 2080 -48
WIRE 3072 0 3072 -192
WIRE 3552 0 3072 0
WIRE 3648 0 3648 -192
WIRE 3648 0 3552 0
WIRE 960 16 960 -32
WIRE 0 64 0 -272
WIRE 384 64 0 64
WIRE 576 64 576 -48
WIRE 576 64 384 64
WIRE 768 64 576 64
WIRE 896 64 768 64
WIRE 1248 80 1248 -224
WIRE 3168 96 3168 -96
WIRE 3280 96 3168 96
WIRE 3360 96 3360 -384
WIRE 3360 96 3344 96
WIRE 3376 96 3360 96
WIRE 3552 96 3552 0
WIRE 3552 96 3440 96
WIRE 192 160 192 -272
WIRE 192 160 96 160
WIRE 960 160 960 112
WIRE 1072 160 960 160
WIRE 1200 160 1152 160
WIRE 288 176 288 160
WIRE 3168 192 3168 96
WIRE 3376 192 3168 192
WIRE 3552 192 3552 96
WIRE 3552 192 3440 192
WIRE 0 208 0 64
WIRE 192 208 192 160
WIRE 768 208 768 64
WIRE 96 256 96 160
WIRE 96 256 64 256
WIRE 128 256 96 256
WIRE 576 256 576 64
WIRE 1072 256 832 256
WIRE 1248 256 1248 176
WIRE 1248 256 1152 256
WIRE 1456 256 1440 256
WIRE 1536 256 1520 256
WIRE 2176 256 2176 240
WIRE 2272 256 2272 240
WIRE 3168 288 3168 192
WIRE 3264 288 3168 288
WIRE 3360 288 3360 96
WIRE 3360 288 3344 288
WIRE 3376 288 3360 288
WIRE 3552 288 3552 192
WIRE 3552 288 3456 288
WIRE 0 352 0 304
WIRE 192 352 192 304
WIRE 288 352 288 240
WIRE 288 352 192 352
WIRE 960 352 960 160
WIRE 1248 352 1248 256
WIRE 1440 352 1440 256
WIRE 1456 352 1440 352
WIRE 1536 352 1520 352
WIRE 2080 352 2080 240
WIRE 2176 352 2176 336
WIRE 2272 352 2272 336
WIRE 384 368 384 64
WIRE 576 368 576 336
WIRE 0 448 0 432
WIRE 192 448 192 432
WIRE 192 448 0 448
WIRE 384 448 384 432
WIRE 384 448 192 448
WIRE 576 448 576 432
WIRE 576 448 384 448
WIRE 768 448 768 304
WIRE 768 448 576 448
WIRE 960 448 960 432
WIRE 960 448 768 448
WIRE 1248 448 1248 432
WIRE 1248 448 960 448
WIRE 1344 448 1248 448
WIRE 1440 448 1440 352
WIRE 1440 448 1344 448
WIRE 1536 448 1440 448
WIRE 2080 448 2080 432
WIRE 2176 448 2176 432
WIRE 2272 448 2272 432
FLAG 1536 -1088 vcc+
IOPIN 1536 -1088 In
FLAG 1536 -1472 x
FLAG 1536 448 vcc-
IOPIN 1536 448 In
FLAG 2080 -416 out
IOPIN 2080 -416 Out
FLAG 1824 -1568 nfb
IOPIN 1824 -1568 Out
FLAG 384 -320 nfb
IOPIN 384 -320 In
FLAG 1536 -1360 xp
FLAG 2080 -32 pwrgnd
IOPIN 2080 -32 In
FLAG -192 -208 sgnd
IOPIN -192 -208 In
FLAG -96 -208 sgnd
IOPIN -96 -208 In
FLAG 1824 -1472 sgnd
IOPIN 1824 -1472 In
FLAG 1536 -992 pwrgnd
IOPIN 1536 -992 In
FLAG 2080 448 sgnd
IOPIN 2080 448 In
FLAG 2080 240 sinus
IOPIN 2080 240 Out
FLAG 384 -704 pgnd
IOPIN 384 -704 In
FLAG 1536 352 pwrgnd
IOPIN 1536 352 In
FLAG 2848 -1536 vcc+
IOPIN 2848 -1536 Out
FLAG 2848 -864 vcc-
IOPIN 2848 -864 Out
FLAG 2848 -1344 gspk
IOPIN 2848 -1344 Out
FLAG 2848 -1056 pwrgnd
IOPIN 2848 -1056 Out
FLAG 2848 -1248 pgnd
IOPIN 2848 -1248 Out
FLAG 2848 -1440 sgnd
IOPIN 2848 -1440 Out
FLAG 2304 -1472 out
IOPIN 2304 -1472 In
FLAG 2464 -224 SPKP
IOPIN 2464 -224 Out
FLAG 1888 -704 gspk
IOPIN 1888 -704 In
FLAG 1888 -992 SPKP
IOPIN 1888 -992 In
FLAG 2848 -1152 pwrgnd
IOPIN 2848 -1152 Out
FLAG 2176 240 impulse
IOPIN 2176 240 Out
FLAG 2848 -960 pwrgnd
IOPIN 2848 -960 Out
FLAG 3264 -960 0
FLAG 1440 -1264 AC1
IOPIN 1440 -1264 BiDir
FLAG 1632 -1264 AC2
IOPIN 1632 -1264 BiDir
FLAG 1536 -320 AC1
IOPIN 1536 -320 BiDir
FLAG 1984 -224 AC2
IOPIN 1984 -224 BiDir
FLAG 1536 -1264 pwrgnd
IOPIN 1536 -1264 In
FLAG 2256 -992 SPK+
FLAG 2256 -704 SPK-
FLAG 2272 240 imd
IOPIN 2272 240 Out
FLAG 1536 -896 pwrgnd
IOPIN 1536 -896 In
FLAG 1536 256 pwrgnd
IOPIN 1536 256 In
FLAG 2176 448 sgnd
IOPIN 2176 448 In
FLAG 2272 448 sgnd
IOPIN 2272 448 In
FLAG 1152 -320 preout
FLAG 288 160 sgnd
IOPIN 288 160 In
FLAG 960 -32 pgnd
IOPIN 960 -32 Out
FLAG -192 -512 sinus
IOPIN -192 -512 Out
DATAFLAG 1344 -1088 ""
DATAFLAG 1344 448 ""
DATAFLAG 96 -704 "-Ic(Q1)"
DATAFLAG 1360 -320 ""
SYMBOL res 2016 -1488 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {nfb1}
SYMBOL voltage 3472 288 R90
WINDOW 123 0 0 Left 2
WINDOW 3 -94 177 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)*(supplyK+1)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rser}
SYMATTR InstName V2
SYMBOL current 1536 -1376 R180
WINDOW 0 24 77 Left 2
WINDOW 3 24 0 Invisible 2
WINDOW 123 -71 178 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii
SYMATTR Value 0
SYMATTR Value2 AC {u(prb)}
SYMBOL voltage 1536 -1472 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 Invisible 2
WINDOW 123 -97 96 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi
SYMATTR Value 0
SYMATTR Value2 AC {u(-prb)}
SYMBOL pnp -64 -272 M180
WINDOW 0 77 84 Left 2
WINDOW 3 75 52 Left 2
SYMATTR InstName Q11
SYMATTR Value CA_BC560C
SYMBOL res -208 -432 R0
SYMATTR InstName R33
SYMATTR Value {nfb1}
SYMBOL res -112 -320 R0
SYMATTR InstName R34
SYMATTR Value {nfb2}
SYMBOL res -16 336 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL res 176 336 R0
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL res -16 -512 R0
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL res 176 -512 R0
SYMATTR InstName R10
SYMATTR Value 100
SYMBOL res 752 -1088 R0
SYMATTR InstName R16
SYMATTR Value 510
SYMBOL ind2 2272 -208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName LTRF
SYMATTR Value 2µ
SYMATTR SpiceLine Rser=10m Rpar=3meg Cpar=1p
SYMATTR Type ind
SYMBOL res 2272 -112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 2.2
SYMBOL res 2208 -1488 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value {nfb2}
SYMBOL voltage 1536 -1472 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL voltage 3360 288 M270
WINDOW 123 0 0 Left 2
WINDOW 3 -96 -62 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)*(supplyK+1)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rser}
SYMATTR InstName V3
SYMBOL res 2064 -224 R0
SYMATTR InstName R54
SYMATTR Value 10
SYMBOL res 2288 -912 R0
SYMATTR InstName R60
SYMATTR Value {Zreal}
SYMBOL ind 2288 -816 R0
SYMATTR InstName L19
SYMATTR Value {Zimg}
SYMATTR SpiceLine Cpar=10p
SYMBOL voltage 1536 -1360 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value 0
SYMATTR InstName V18
SYMBOL cap 1456 -912 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C20
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 2064 -112 R0
SYMATTR InstName C24
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 1520 240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C25
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL polcap 1904 -1488 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 2.2m
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=1110k Cpar=3p mfg="Nichicon" pn="UPW0J222MPD6TD" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 80 -1088 R0
SYMATTR InstName R47
SYMATTR Value 62
SYMBOL ind2 2864 -1520 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVCC
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -848 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVEE
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL voltage 2080 336 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {vinput} {freq})
SYMATTR InstName V11
SYMBOL pnp 160 -848 R180
SYMATTR InstName Q1
SYMATTR Value 2SA1381F
SYMBOL pnp 256 -272 R180
WINDOW 0 77 84 Left 2
WINDOW 3 75 52 Left 2
SYMATTR InstName Q7
SYMATTR Value CA_BC560C
SYMBOL ind2 2864 -1328 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LGSPK2
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1040 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND2
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1232 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1424 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 25m
SYMBOL res 3088 -1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 25m
SYMBOL res 3088 -1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 25m
SYMBOL res 3088 -1264 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 25m
SYMBOL res 3088 -1456 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 25m
SYMBOL res 3088 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 25m
SYMBOL ind 3344 -1072 R0
SYMATTR InstName L4
SYMATTR Value 4n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1264 R0
SYMATTR InstName L5
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1360 R0
SYMATTR InstName L6
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1456 R0
SYMATTR InstName L18
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind2 1904 -976 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKP
SYMATTR Value {con2_len*20n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL ind2 1904 -688 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKN2
SYMATTR Value {con2_len*20n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL res 2480 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R39
SYMATTR Value 20m
SYMBOL res 2128 -1008 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R41
SYMATTR Value 15m
SYMBOL res 2128 -720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 15m
SYMBOL ind2 2864 -944 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LDGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 25m
SYMBOL ind2 2864 -1136 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND1
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 25m
SYMBOL voltage 2176 336 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {vinput/2} 1u 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V7
SYMBOL voltage 2176 240 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {-vinput/2} {1u+(1/(freq*2))} 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V8
SYMBOL polcap -208 -432 M180
WINDOW 3 24 8 Left 2
WINDOW 0 24 57 Left 2
SYMATTR Value 220µ
SYMATTR InstName C11
SYMATTR SpiceLine V=6.3 Irms=290m Rser=0.5 Lser=3n Rpar=1100k Cpar=3p mfg="Nichicon" pn="UPW0J221MED1TD" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 1456 -976 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C14
SYMATTR Value 1m
SYMATTR SpiceLine V=63 Irms=2.77 Rser=0.036 Lser=5n Rpar=900k Cpar=3p mfg="Nichicon" pn="UPW1J102MHD6" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 1520 368 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C17
SYMATTR Value 1m
SYMATTR SpiceLine V=63 Irms=2.77 Rser=0.036 Lser=5n Rpar=900k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL voltage 1424 -320 R270
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL voltage 2080 -224 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 0
SYMBOL voltage 2272 336 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/2} 19k)
SYMATTR InstName V9
SYMBOL voltage 2272 240 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/2} 20k 0 0)
SYMATTR InstName V10
SYMBOL ind 2192 -1456 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value {20n+knfb}
SYMBOL res 2208 -1392 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 2k7
SYMBOL res 368 -816 R0
SYMATTR InstName R45
SYMATTR Value 10k
SYMBOL npn 128 208 R0
SYMATTR InstName Q6
SYMATTR Value CA_BC550C
SYMBOL npn 64 208 M0
SYMATTR InstName Q8
SYMATTR Value CA_BC550C
SYMBOL res 1232 -432 R0
SYMATTR InstName R14
SYMATTR Value 0.22
SYMBOL res 1232 -320 R0
SYMATTR InstName R21
SYMATTR Value 0.22
SYMBOL cap 3280 80 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C23
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3376 -496 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C26
SYMATTR Value 10n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL res 752 -912 R0
SYMATTR InstName R4
SYMATTR Value 510
SYMBOL polcap 560 -400 R0
SYMATTR Value 1m
SYMATTR InstName C1
SYMATTR SpiceLine V=6.3 Irms=290m Rser=0.5 Lser=3n Rpar=1100k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL npn 928 -560 M0
SYMATTR InstName Q5
SYMATTR Value 2SC3503F
SYMBOL res 1232 336 R0
SYMATTR InstName R7
SYMATTR Value 0.1
SYMBOL nmos 1200 80 R0
SYMATTR InstName M1
SYMATTR Value IRFP240
SYMBOL nmos 1200 -688 R0
SYMATTR InstName M2
SYMATTR Value IRFP240
SYMBOL npn 832 208 M0
SYMATTR InstName Q2
SYMATTR Value CA_BC550C
SYMBOL res 1168 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL npn 896 16 R0
SYMATTR InstName Q3
SYMATTR Value 2SC3503F
SYMBOL res 944 336 R0
SYMATTR InstName R1
SYMATTR Value 510
SYMBOL res 1168 -624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res 1168 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 1k
SYMBOL res 944 -432 R0
SYMATTR InstName R6
SYMATTR Value 510
SYMBOL res 1168 -528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 100
SYMBOL cap 1136 -432 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C28
SYMATTR Value 1n
SYMATTR SpiceLine Rser=.15 Lser=5n Rpar=3meg Cpar=2p
SYMBOL pnp 320 -944 M180
WINDOW 0 77 84 Left 2
WINDOW 3 75 52 Left 2
SYMATTR InstName Q4
SYMATTR Value CA_BC560C
SYMBOL res 288 -1008 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 1k
SYMBOL cap 2096 -1392 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 22p
SYMATTR SpiceLine Rser=.18 Lser=5n Rpar=5meg Cpar=2n
SYMBOL zener 368 432 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value BZX84C12L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL zener 752 -336 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value BZX84C12L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 560 240 R0
SYMATTR InstName R30
SYMATTR Value 100
SYMBOL cap 272 176 R0
SYMATTR InstName C4
SYMATTR Value 180p
SYMATTR SpiceLine Rser=.3 Lser=6n Rpar=3.9meg Cpar=1p
SYMBOL cap 560 -112 R0
SYMATTR InstName C3
SYMATTR Value 180p
SYMATTR SpiceLine Rser=.3 Lser=6n Rpar=3.9meg Cpar=1p
SYMBOL cap 560 368 R0
SYMATTR InstName C10
SYMATTR Value 100p
SYMATTR SpiceLine Rser=.3 Lser=7n Rpar=2.9meg Cpar=1p
SYMBOL cap -208 -304 R0
SYMATTR InstName C29
SYMATTR Value 2n2
SYMATTR SpiceLine Rser=.25 Lser=8n Rpar=2.1meg Cpar=2p
SYMBOL polcap 3344 -688 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 47m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.024 Lser=89n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 3440 -688 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C21
SYMATTR Value 47m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.024 Lser=85n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 3440 -784 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C18
SYMATTR Value 4.7m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.044 Lser=39n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 3344 -784 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C19
SYMATTR Value 4.7m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.044 Lser=39n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 3360 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 3472 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL polcap 3344 -592 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 47m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.024 Lser=89n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 3440 -592 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 47m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.024 Lser=85n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL schottky 3440 -208 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -113 -33 Left 2
SYMATTR InstName D3
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3056 -272 R0
WINDOW 3 -110 96 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D4
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3632 -208 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -114 -32 Left 2
SYMATTR InstName D5
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3248 -272 R0
WINDOW 3 -111 97 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D7
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 2960 -272 R0
SYMATTR InstName C16
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3152 -272 R0
SYMATTR InstName C27
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3728 -272 R0
SYMATTR InstName C30
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3536 -272 R0
SYMATTR InstName C31
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3376 80 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3376 176 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3376 -400 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value 10n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3280 -400 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C15
SYMATTR Value 10n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
TEXT 688 -1488 Left 2 !;op
TEXT -16 -1344 Left 2 !.option plotwinsize=0
TEXT -16 -1312 Left 2 !.option noopiter
TEXT -16 -1616 Left 2 ;Transient
TEXT -16 -1456 Left 2 !.four {freq} 10 10 v(SPK+,SPK-)
TEXT 688 -1520 Left 2 !.param prb=0
TEXT -16 -1520 Left 2 !.param timestep {1/((262144/8)*freq)}
TEXT -16 -1552 Left 2 !.param freq 1
TEXT -16 -1488 Left 2 !.param stoptime {iterations/freq}
TEXT 688 -1584 Left 2 !;ac oct 100 10 100meg
TEXT 688 -1552 Left 2 ;.step param prb list -1 1
TEXT 688 -1616 Left 2 ;AC analysis
TEXT -16 -1424 Left 2 !.param iterations 80
TEXT 320 -1280 Left 2 !.lib usr/ONNN_BJT.lib
TEXT 688 -1280 Left 2 !.param Zimp 4
TEXT 1760 -576 Left 2 !.param Zreal Zimp/sqrt(2)
TEXT 1760 -544 Left 2 !.param Zimg (Zimp/sqrt(2))/(2*pi*freq)
TEXT 688 -1248 Left 2 !.param supplyPWR 100
TEXT 688 -1216 Left 2 !.param supplyVLT 14
TEXT 320 -1216 Left 2 !.lib usr/STM_D.lib
TEXT 320 -1312 Left 2 !.lib usr/FCS_BJT.lib
TEXT 688 -1312 Left 2 !.param voutput 15m
TEXT 688 -1184 Left 2 !.param supplyK 0.08
TEXT 2688 464 Left 2 !.param rser {(supplyVLT*supplyVLT*supplyK)/supplyPWR}
TEXT -16 -1584 Left 2 !.tran 0 {stoptime} 0 {timestep} startup
TEXT 2688 496 Left 2 !.param phi 90
TEXT 1040 -1312 Left 2 !.param con1_len 10
TEXT 2688 432 Left 2 !KCON1 LVCC LSGND LGSPK2 LPGND LPWRGND1 LPWRGND2 LVEE LDGND 0.8
TEXT 1040 -1280 Left 2 !.param con2_len 10
TEXT 1760 -608 Left 2 !KCON2 LSPKP LSPKN2 0.8
TEXT 1744 -1072 Left 2 ;Konektor zvucnika i zvucnik
TEXT 2672 -1616 Left 2 ;Konektor napajanja, star ground i napajanje
TEXT 1744 -1616 Left 2 ;Negativna povratna sprega
TEXT 688 -1344 Left 2 ;Ulazni parametri kola
TEXT 1536 -1616 Center 2 ;AC sonda
TEXT 320 -1344 Left 2 !.lib usr/FCS_D.lib
TEXT 1040 -1248 Left 2 !.param BIAS 0.4
TEXT 320 -1248 Left 2 !.lib usr/ONNN_D.lib
TEXT 1744 -1200 Left 2 !.param knfb 1p
TEXT 1744 -1176 Left 2 !.param vinput voutput*(nfb1/nfb2)
TEXT 1040 -1184 Left 2 !.param nfb1 100
TEXT 1040 -1152 Left 2 !.param nfb2 1k8
TEXT 320 -1184 Left 2 !.lib usr/TSE_BJT.lib
TEXT 688 -1152 Left 2 !.param rbd 22
RECTANGLE Normal 640 -1632 -32 -1392
RECTANGLE Normal 640 -1152 -32 -1360
RECTANGLE Normal 1344 -1632 672 -1392
RECTANGLE Normal 2432 -512 1728 -1088 2
RECTANGLE Normal 1664 -1120 1408 -1632 2
RECTANGLE Normal 3088 -816 2864 -1584 2
RECTANGLE Normal 2128 -656 1904 -1040 2
RECTANGLE Normal 2432 -1120 1728 -1632 2
RECTANGLE Normal 1344 -1360 672 -1120
