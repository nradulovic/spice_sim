Version 4
SHEET 1 6124 2336
WIRE 2016 -1568 1824 -1568
WIRE 2880 -1536 2848 -1536
WIRE 2992 -1536 2960 -1536
WIRE 3648 -1536 3072 -1536
WIRE 1536 -1472 1520 -1472
WIRE 1552 -1472 1536 -1472
WIRE 1840 -1472 1824 -1472
WIRE 1920 -1472 1904 -1472
WIRE 2016 -1472 2016 -1568
WIRE 2016 -1472 2000 -1472
WIRE 2112 -1472 2016 -1472
WIRE 2208 -1472 2192 -1472
WIRE 2304 -1472 2288 -1472
WIRE 2400 -1472 2304 -1472
WIRE 1536 -1456 1536 -1472
WIRE 2880 -1440 2848 -1440
WIRE 2992 -1440 2960 -1440
WIRE 3360 -1440 3072 -1440
WIRE 2016 -1376 2016 -1472
WIRE 2032 -1376 2016 -1376
WIRE 2112 -1376 2096 -1376
WIRE 2208 -1376 2192 -1376
WIRE 2304 -1376 2304 -1472
WIRE 2304 -1376 2288 -1376
WIRE 1536 -1360 1536 -1376
WIRE 1536 -1344 1536 -1360
WIRE 2880 -1344 2848 -1344
WIRE 2992 -1344 2960 -1344
WIRE 3360 -1344 3360 -1360
WIRE 3360 -1344 3072 -1344
WIRE 1440 -1264 1440 -1472
WIRE 1632 -1264 1632 -1472
WIRE 2880 -1248 2848 -1248
WIRE 2992 -1248 2960 -1248
WIRE 3360 -1248 3360 -1264
WIRE 3360 -1248 3072 -1248
WIRE 2880 -1152 2848 -1152
WIRE 2992 -1152 2960 -1152
WIRE 3168 -1152 3072 -1152
WIRE 480 -1088 96 -1088
WIRE 672 -1088 480 -1088
WIRE 1248 -1088 672 -1088
WIRE 1376 -1088 1248 -1088
WIRE 1440 -1088 1376 -1088
WIRE 1536 -1088 1440 -1088
WIRE 96 -1072 96 -1088
WIRE 480 -1072 480 -1088
WIRE 672 -1072 672 -1088
WIRE 2880 -1056 2848 -1056
WIRE 2992 -1056 2960 -1056
WIRE 3168 -1056 3168 -1152
WIRE 3168 -1056 3072 -1056
WIRE 3360 -1056 3360 -1168
WIRE 3360 -1056 3168 -1056
WIRE 1440 -992 1440 -1088
WIRE 1456 -992 1440 -992
WIRE 1536 -992 1520 -992
WIRE 2080 -992 2048 -992
WIRE 2192 -992 2160 -992
WIRE 2416 -992 2272 -992
WIRE 2464 -992 2416 -992
WIRE 480 -976 480 -1008
WIRE 2880 -960 2848 -960
WIRE 2992 -960 2960 -960
WIRE 3168 -960 3168 -1056
WIRE 3168 -960 3072 -960
WIRE 96 -944 96 -992
WIRE 672 -944 672 -992
WIRE 480 -896 480 -912
WIRE 480 -896 160 -896
WIRE 608 -896 480 -896
WIRE 1440 -896 1440 -992
WIRE 1456 -896 1440 -896
WIRE 1536 -896 1520 -896
WIRE 2464 -896 2464 -992
WIRE 480 -880 480 -896
WIRE 2880 -864 2848 -864
WIRE 2992 -864 2960 -864
WIRE 3280 -864 3072 -864
WIRE 3360 -864 3360 -976
WIRE 3360 -864 3344 -864
WIRE 3376 -864 3360 -864
WIRE 3648 -864 3648 -1536
WIRE 3648 -864 3440 -864
WIRE 2464 -800 2464 -816
WIRE 3072 -768 3072 -864
WIRE 3072 -768 2976 -768
WIRE 3168 -768 3072 -768
WIRE 3264 -768 3168 -768
WIRE 3280 -768 3264 -768
WIRE 3360 -768 3360 -864
WIRE 3360 -768 3344 -768
WIRE 3376 -768 3360 -768
WIRE 3456 -768 3440 -768
WIRE 3552 -768 3456 -768
WIRE 3648 -768 3648 -864
WIRE 3648 -768 3552 -768
WIRE 3744 -768 3648 -768
WIRE 1248 -752 1248 -1088
WIRE 2976 -752 2976 -768
WIRE 3072 -752 3072 -768
WIRE 3168 -752 3168 -768
WIRE 3264 -752 3264 -768
WIRE 3456 -752 3456 -768
WIRE 3552 -752 3552 -768
WIRE 3648 -752 3648 -768
WIRE 3744 -752 3744 -768
WIRE 480 -704 480 -800
WIRE 672 -704 672 -848
WIRE 864 -704 672 -704
WIRE 2080 -704 2048 -704
WIRE 2192 -704 2160 -704
WIRE 2416 -704 2272 -704
WIRE 2464 -704 2464 -720
WIRE 2464 -704 2416 -704
WIRE 672 -688 672 -704
WIRE 864 -688 864 -704
WIRE 1440 -672 1440 -896
WIRE 2976 -672 2976 -688
WIRE 3072 -672 3072 -688
WIRE 3072 -672 2976 -672
WIRE 3168 -672 3168 -688
WIRE 3264 -672 3264 -688
WIRE 3264 -672 3168 -672
WIRE 3456 -672 3456 -688
WIRE 3456 -672 3264 -672
WIRE 3552 -672 3552 -688
WIRE 3552 -672 3456 -672
WIRE 3648 -672 3648 -688
WIRE 3744 -672 3744 -688
WIRE 3744 -672 3648 -672
WIRE 1248 -656 1248 -752
WIRE 1056 -608 864 -608
WIRE 1072 -608 1056 -608
WIRE 1184 -608 1152 -608
WIRE 3072 -576 3072 -672
WIRE 3264 -576 3072 -576
WIRE 3648 -576 3648 -672
WIRE 3648 -576 3264 -576
WIRE 864 -560 864 -608
WIRE 1440 -560 1440 -672
WIRE 96 -512 96 -848
WIRE 96 -512 0 -512
WIRE 192 -512 96 -512
WIRE 672 -512 672 -608
WIRE 800 -512 672 -512
WIRE 1248 -512 1248 -560
WIRE 1264 -512 1248 -512
WIRE 1376 -512 1344 -512
WIRE -192 -496 -192 -512
WIRE 0 -496 0 -512
WIRE 192 -496 192 -512
WIRE 3264 -480 3264 -576
WIRE 3376 -480 3264 -480
WIRE 3456 -480 3456 -672
WIRE 3456 -480 3440 -480
WIRE -192 -416 -192 -432
WIRE 672 -416 672 -512
WIRE 1248 -416 1248 -512
WIRE 1440 -416 1440 -464
WIRE 1056 -400 1056 -608
WIRE 2176 -400 2176 -416
WIRE 3264 -384 3264 -480
WIRE 3280 -384 3264 -384
WIRE 3360 -384 3360 -768
WIRE 3360 -384 3344 -384
WIRE 3376 -384 3360 -384
WIRE 3456 -384 3456 -480
WIRE 3456 -384 3440 -384
WIRE 0 -368 0 -416
WIRE 192 -368 192 -416
WIRE -192 -320 -192 -336
WIRE -96 -320 -192 -320
WIRE -64 -320 -96 -320
WIRE 288 -320 256 -320
WIRE 1440 -320 1440 -336
WIRE 1552 -320 1440 -320
WIRE 1632 -320 1552 -320
WIRE 1728 -320 1712 -320
WIRE -192 -304 -192 -320
WIRE -96 -304 -96 -320
WIRE 672 -304 672 -336
WIRE 1440 -304 1440 -320
WIRE 3264 -288 3264 -384
WIRE 3360 -288 3360 -384
WIRE 3360 -288 3344 -288
WIRE 3376 -288 3360 -288
WIRE 3456 -288 3456 -384
WIRE 3360 -256 3360 -288
WIRE 2080 -224 2080 -416
WIRE 2080 -224 2064 -224
WIRE 2176 -224 2176 -336
WIRE 2176 -224 2080 -224
WIRE 2272 -224 2176 -224
WIRE 2288 -224 2272 -224
WIRE 2384 -224 2368 -224
WIRE -192 -208 -192 -240
WIRE -96 -208 -96 -224
WIRE 2080 -208 2080 -224
WIRE 1440 -176 1440 -224
WIRE 400 -128 384 -128
WIRE 592 -128 480 -128
WIRE 672 -128 672 -224
WIRE 672 -128 656 -128
WIRE 1248 -128 1248 -336
WIRE 1264 -128 1248 -128
WIRE 1376 -128 1344 -128
WIRE 2272 -128 2272 -224
WIRE 2288 -128 2272 -128
WIRE 2368 -128 2368 -224
WIRE 2080 -112 2080 -128
WIRE 2176 -112 2176 -224
WIRE 1248 -80 1248 -128
WIRE 384 -32 384 -128
WIRE 592 -32 384 -32
WIRE 672 -32 672 -128
WIRE 672 -32 656 -32
WIRE 864 -32 864 -464
WIRE 864 -32 672 -32
WIRE 1056 -32 1056 -336
WIRE 1056 -32 864 -32
WIRE 1072 -32 1056 -32
WIRE 1184 -32 1152 -32
WIRE 2080 -32 2080 -48
WIRE 2176 -32 2176 -48
WIRE 576 64 480 64
WIRE 480 112 480 64
WIRE 0 160 0 -272
WIRE 384 160 384 -32
WIRE 384 160 0 160
WIRE 416 160 384 160
WIRE 192 256 192 -272
WIRE 192 256 96 256
WIRE 2176 256 2176 240
WIRE 2272 256 2272 240
WIRE 0 304 0 160
WIRE 192 304 192 256
WIRE 672 304 672 -32
WIRE 96 352 96 256
WIRE 96 352 64 352
WIRE 128 352 96 352
WIRE 480 352 480 208
WIRE 608 352 480 352
WIRE 1440 352 1440 -80
WIRE 1456 352 1440 352
WIRE 1536 352 1520 352
WIRE 2080 352 2080 240
WIRE 2176 352 2176 336
WIRE 2272 352 2272 336
WIRE 1056 368 1056 352
WIRE 0 448 0 400
WIRE 192 448 192 400
WIRE 480 448 480 352
WIRE 672 448 672 400
WIRE 1440 448 1440 352
WIRE 1456 448 1440 448
WIRE 1536 448 1520 448
WIRE 2080 448 2080 432
WIRE 2176 448 2176 432
WIRE 2272 448 2272 432
WIRE 0 544 0 528
WIRE 192 544 192 528
WIRE 192 544 0 544
WIRE 480 544 480 528
WIRE 480 544 192 544
WIRE 672 544 672 528
WIRE 672 544 480 544
WIRE 1056 544 1056 432
WIRE 1056 544 672 544
WIRE 1072 544 1056 544
WIRE 1248 544 1248 16
WIRE 1248 544 1152 544
WIRE 1376 544 1248 544
WIRE 1440 544 1440 448
WIRE 1440 544 1376 544
WIRE 1536 544 1440 544
FLAG 1536 -1088 vcc+
IOPIN 1536 -1088 In
FLAG 1536 -1472 x
FLAG 1536 544 vcc-
IOPIN 1536 544 In
FLAG 2080 -416 out
IOPIN 2080 -416 Out
FLAG 1824 -1568 nfb
IOPIN 1824 -1568 Out
FLAG 288 -320 nfb
IOPIN 288 -320 In
FLAG 1536 -1360 xp
FLAG 2080 -32 pwrgnd
IOPIN 2080 -32 In
FLAG -192 -208 sgnd
IOPIN -192 -208 In
FLAG -96 -208 sgnd
IOPIN -96 -208 In
FLAG 1824 -1472 sgnd
IOPIN 1824 -1472 In
FLAG 1536 -992 pwrgnd
IOPIN 1536 -992 In
FLAG 2080 448 sgnd
IOPIN 2080 448 In
FLAG 2080 240 sinus
IOPIN 2080 240 Out
FLAG 1536 448 pwrgnd
IOPIN 1536 448 In
FLAG 2848 -1536 vcc+
IOPIN 2848 -1536 Out
FLAG 2848 -864 vcc-
IOPIN 2848 -864 Out
FLAG 2848 -1344 gspk
IOPIN 2848 -1344 Out
FLAG 2848 -1056 pwrgnd
IOPIN 2848 -1056 Out
FLAG 2848 -1248 pgnd
IOPIN 2848 -1248 Out
FLAG 2848 -1440 sgnd
IOPIN 2848 -1440 Out
FLAG 2400 -1472 out
IOPIN 2400 -1472 In
FLAG 2464 -224 SPKP
IOPIN 2464 -224 Out
FLAG 2048 -704 gspk
IOPIN 2048 -704 In
FLAG 2048 -992 SPKP
IOPIN 2048 -992 In
FLAG 2848 -1152 pwrgnd
IOPIN 2848 -1152 Out
FLAG 2176 240 impulse
IOPIN 2176 240 Out
FLAG 2848 -960 pwrgnd
IOPIN 2848 -960 Out
FLAG 3360 -256 0
FLAG 1440 -1264 AC1
IOPIN 1440 -1264 BiDir
FLAG 1632 -1264 AC2
IOPIN 1632 -1264 BiDir
FLAG 1728 -320 AC1
IOPIN 1728 -320 BiDir
FLAG 1984 -224 AC2
IOPIN 1984 -224 BiDir
FLAG 1536 -1264 pwrgnd
IOPIN 1536 -1264 In
FLAG 2416 -992 SPK+
FLAG 2416 -704 SPK-
FLAG 2272 240 imd
IOPIN 2272 240 Out
FLAG 576 64 pgnd
IOPIN 576 64 In
FLAG 2176 -416 vcc+
IOPIN 2176 -416 In
FLAG 2176 -32 vcc-
IOPIN 2176 -32 In
FLAG 1536 -896 pwrgnd
IOPIN 1536 -896 In
FLAG 1536 352 pwrgnd
IOPIN 1536 352 In
FLAG 2176 448 sgnd
IOPIN 2176 448 In
FLAG 2272 448 sgnd
IOPIN 2272 448 In
FLAG 1056 352 pgnd
IOPIN 1056 352 In
FLAG 480 -704 pgnd
IOPIN 480 -704 Out
FLAG -192 -512 sinus
IOPIN -192 -512 Out
DATAFLAG 1376 -1088 ""
DATAFLAG 1376 544 ""
DATAFLAG 1248 -752 "Ic(Q18)"
DATAFLAG 1552 -320 ""
DATAFLAG 1440 -672 "Ic(Q4)"
SYMBOL res 2016 -1488 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {nfb1}
SYMBOL voltage 3472 -288 R90
WINDOW 123 0 0 Left 2
WINDOW 3 -94 177 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rser}
SYMATTR InstName V2
SYMBOL current 1536 -1376 R180
WINDOW 0 24 77 Left 2
WINDOW 3 24 0 Invisible 2
WINDOW 123 -71 178 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii
SYMATTR Value 0
SYMATTR Value2 AC {u(prb)}
SYMBOL voltage 1536 -1472 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 Invisible 2
WINDOW 123 -97 96 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi
SYMATTR Value 0
SYMATTR Value2 AC {u(-prb)}
SYMBOL pnp -64 -272 M180
WINDOW 0 77 84 Left 2
WINDOW 3 75 52 Left 2
SYMATTR InstName Q11
SYMATTR Value CA_BC560C
SYMBOL res -208 -432 R0
SYMATTR InstName R33
SYMATTR Value {nfb1}
SYMBOL res -112 -320 R0
SYMATTR InstName R34
SYMATTR Value {nfb2}
SYMBOL res -16 432 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL res 176 432 R0
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL res -16 -512 R0
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL res 176 -512 R0
SYMATTR InstName R10
SYMATTR Value 100
SYMBOL res 656 -1088 R0
SYMATTR InstName R16
SYMATTR Value 47
SYMBOL schottky 2160 -336 M180
WINDOW 0 24 72 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value 1N5404
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 2160 -48 M180
WINDOW 0 24 72 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value 1N5404
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL ind2 2272 -208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName LTRF
SYMATTR Value 2µ
SYMATTR SpiceLine Rser=10m Rpar=3meg Cpar=1p
SYMATTR Type ind
SYMBOL res 2272 -112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 2.2
SYMBOL res 2208 -1488 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value {nfb2}
SYMBOL voltage 1536 -1472 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL schottky 3440 -688 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -14 -112 Left 2
SYMATTR InstName D6
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3056 -752 R0
WINDOW 3 -144 95 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D9
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage 3360 -288 M270
WINDOW 123 0 0 Left 2
WINDOW 3 -96 -62 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rser}
SYMATTR InstName V3
SYMBOL res 2064 -224 R0
SYMATTR InstName R54
SYMATTR Value 10
SYMBOL res 2448 -912 R0
SYMATTR InstName R60
SYMATTR Value {Zreal}
SYMBOL ind 2448 -816 R0
SYMATTR InstName L19
SYMATTR Value {Zimg}
SYMATTR SpiceLine Cpar=10p
SYMBOL voltage 1536 -1360 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value 0
SYMATTR InstName V18
SYMBOL pnp 1184 16 M180
SYMATTR InstName Q17
SYMATTR Value 2SA1837
SYMBOL npn 1184 -656 R0
SYMATTR InstName Q18
SYMATTR Value 2SC4793
SYMBOL cap 1456 -912 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C20
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL res 1168 -624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value {rbd}
SYMBOL res 1168 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value {rbd}
SYMBOL cap 2064 -112 R0
SYMATTR InstName C24
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 1520 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C25
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL polcap 1904 -1488 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 2200µ
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=1110k Cpar=3p mfg="Nichicon" pn="UPW0J222MPD6TD" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 3344 -784 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 4700µ
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.08 Lser=20n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 80 -1088 R0
SYMATTR InstName R47
SYMATTR Value 100
SYMBOL res 656 -432 R0
WINDOW 3 36 76 Invisible 2
SYMATTR Value {1+(500*BIAS)}
SYMATTR InstName PBIAS1
SYMBOL res 656 -704 R0
SYMATTR InstName R52
SYMATTR Value 1k2
SYMBOL res 848 -704 R0
SYMATTR InstName R53
SYMATTR Value 11
SYMBOL schottky 3632 -688 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -112 -78 Left 2
SYMATTR InstName D10
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3248 -752 R0
WINDOW 3 -239 65 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D11
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL ind2 2864 -1520 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVCC
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -848 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVEE
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL npn 608 304 R0
SYMATTR InstName Q3
SYMATTR Value 2SC3503F
SYMBOL res 656 432 R0
SYMATTR InstName R6
SYMATTR Value 15
SYMBOL cap -208 -240 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C4
SYMATTR Value 2n2
SYMBOL voltage 2080 336 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {vinput} {freq})
SYMATTR InstName V11
SYMBOL res 1232 -432 R0
SYMATTR InstName R1
SYMATTR Value 47
SYMBOL pnp 256 -272 R180
WINDOW 0 77 84 Left 2
WINDOW 3 75 52 Left 2
SYMATTR InstName Q7
SYMATTR Value CA_BC560C
SYMBOL npn 800 -560 R0
SYMATTR InstName Q21
SYMATTR Value MJE340
SYMBOL ind2 2864 -1328 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LGSPK2
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1040 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND2
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1232 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1424 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 25m
SYMBOL res 3088 -1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 25m
SYMBOL res 3088 -1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 25m
SYMBOL res 3088 -1264 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 25m
SYMBOL res 3088 -1456 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 25m
SYMBOL res 3088 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 25m
SYMBOL ind 3344 -1072 R0
SYMATTR InstName L4
SYMATTR Value 4n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1264 R0
SYMATTR InstName L5
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1360 R0
SYMATTR InstName L6
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1456 R0
SYMATTR InstName L18
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind2 2064 -976 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKP
SYMATTR Value {con2_len*20n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2064 -688 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKN2
SYMATTR Value {con2_len*20n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL res 2480 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R39
SYMATTR Value 20m
SYMBOL res 2288 -1008 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R41
SYMATTR Value 15m
SYMBOL res 2288 -720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 15m
SYMBOL ind2 2864 -944 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LDGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 25m
SYMBOL ind2 2864 -1136 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND1
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 25m
SYMBOL voltage 2176 336 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {vinput/2} 1u 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V7
SYMBOL voltage 2176 240 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {-vinput/2} {1u+(1/(freq*2))} 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V8
SYMBOL polcap -208 -432 M180
WINDOW 3 24 8 Left 2
WINDOW 0 24 57 Left 2
SYMATTR Value 220µ
SYMATTR InstName C11
SYMATTR SpiceLine V=6.3 Irms=290m Rser=0.5 Lser=3n Rpar=1100k Cpar=3p mfg="Nichicon" pn="UPW0J221MED1TD" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 1456 -976 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C14
SYMATTR Value 1000µ
SYMATTR SpiceLine V=63 Irms=2.77 Rser=0.036 Lser=5n Rpar=900k Cpar=3p mfg="Nichicon" pn="UPW1J102MHD6" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 1520 464 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C17
SYMATTR Value 1000µ
SYMATTR SpiceLine V=63 Irms=2.77 Rser=0.036 Lser=5n Rpar=900k Cpar=3p mfg="Nichicon" pn="UPW1J102MHD6" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 1040 -400 R0
SYMATTR InstName C21
SYMATTR Value 47µ
SYMATTR SpiceLine V=100 Irms=250m Rser=0.71 Lser=2n Rpar=2meg Cpar=2p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 3440 -784 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C16
SYMATTR Value 4700µ
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.08 Lser=20n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 656 -320 R0
SYMATTR InstName R37
SYMATTR Value 240
SYMBOL voltage 1728 -320 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL voltage 2080 -224 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 0
SYMBOL voltage 2272 336 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/2} 19k)
SYMATTR InstName V9
SYMBOL voltage 2272 240 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/2} 20k 0 0)
SYMATTR InstName V10
SYMBOL ind 2192 -1456 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value {20n+knfb}
SYMBOL npn 1376 -560 R0
SYMATTR InstName Q4
SYMATTR Value MJL3281A
SYMBOL pnp 1376 -80 M180
SYMATTR InstName Q9
SYMATTR Value MJL1302A
SYMBOL res 1360 -528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 2
SYMBOL res 1360 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R68
SYMATTR Value 2
SYMBOL cap 656 -144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 100p
SYMATTR SpiceLine Rser=140m Lser=3n Rpar=7.4meg
SYMBOL ind 2192 -1360 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {20n+knfb}
SYMBOL res 2208 -1392 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL cap 2096 -1392 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 12p
SYMATTR SpiceLine Rser=140m Lser=3n Rpar=7.4meg
SYMBOL npn 128 304 R0
SYMATTR InstName Q6
SYMATTR Value CA_BC550C
SYMBOL npn 64 304 M0
SYMATTR InstName Q8
SYMATTR Value CA_BC550C
SYMBOL npn 416 112 R0
SYMATTR InstName Q2
SYMATTR Value CA_BC550C
SYMBOL res 464 432 R0
SYMATTR InstName R7
SYMATTR Value 510
SYMBOL diode 592 -16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value BAV21
SYMBOL res 496 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10m
SYMBOL res 1424 -432 R0
SYMATTR InstName R14
SYMATTR Value 0.22
SYMBOL res 1424 -320 R0
SYMATTR InstName R21
SYMATTR Value 0.22
SYMBOL cap 2960 -752 R0
SYMATTR InstName C7
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3152 -752 R0
SYMATTR InstName C8
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3536 -752 R0
SYMATTR InstName C13
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3728 -752 R0
SYMATTR InstName C15
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL polcap 3344 -880 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C18
SYMATTR Value 220µ
SYMATTR SpiceLine V=50 Irms=1.04 Rser=0.075 Lser=0 Rpar=40k Cpar=3p mfg="Nichicon" pn="UPL1H221MPH" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 3440 -880 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C19
SYMATTR Value 220µ
SYMATTR SpiceLine V=50 Irms=1.04 Rser=0.075 Lser=0 Rpar=40k Cpar=3p mfg="Nichicon" pn="UPL1H221MPH" type="Al electrolytic"
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL cap 3376 -400 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C22
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3280 -400 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C23
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3376 -496 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C26
SYMATTR Value 10n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL res 1168 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 22
SYMBOL polcap 1040 368 R0
SYMATTR Value 470µ
SYMATTR InstName C12
SYMATTR SpiceLine V=6.3 Irms=290m Rser=0.5 Lser=3n Rpar=1100k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL pnp 608 -848 M180
WINDOW 0 77 84 Left 2
WINDOW 3 75 52 Left 2
SYMATTR InstName Q1
SYMATTR Value 2SA1381F
SYMBOL diode 464 -1072 R0
SYMATTR InstName D2
SYMATTR Value BAV21
SYMBOL diode 464 -976 R0
SYMATTR InstName D3
SYMATTR Value BAV21
SYMBOL res 464 -896 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL pnp 160 -848 R180
WINDOW 0 77 84 Left 2
WINDOW 3 75 52 Left 2
SYMATTR InstName Q5
SYMATTR Value 2SA1381F
TEXT 688 -1488 Left 2 !;op
TEXT -16 -1344 Left 2 !.option plotwinsize=0
TEXT -16 -1312 Left 2 !.option noopiter
TEXT -16 -1616 Left 2 ;Transient
TEXT -16 -1456 Left 2 !.four {freq} 10 10 v(SPK+,SPK-)
TEXT 688 -1520 Left 2 !.param prb=0
TEXT -16 -1520 Left 2 !.param timestep {1/((262144/8)*freq)}
TEXT -16 -1552 Left 2 !.param freq 1k
TEXT -16 -1488 Left 2 !.param stoptime {iterations/freq}
TEXT 688 -1584 Left 2 !;ac oct 100 10 100meg
TEXT 688 -1552 Left 2 ;.step param prb list -1 1
TEXT 688 -1616 Left 2 ;AC analysis
TEXT -16 -1424 Left 2 !.param iterations 80
TEXT 320 -1280 Left 2 !.lib usr/ONNN_BJT.lib
TEXT 2672 16 Left 2 !.param Zimp 6
TEXT 1920 -576 Left 2 !.param Zreal Zimp/2
TEXT 1920 -544 Left 2 !.param Zimg (Zimp*sqrt(3))/(4*pi*freq)
TEXT 2672 48 Left 2 !.param supplyPWR 100
TEXT 2672 80 Left 2 !.param supplyVLT 16
TEXT 320 -1216 Left 2 !.lib usr/STM_D.lib
TEXT 320 -1312 Left 2 !.lib usr/FCS_BJT.lib
TEXT 2672 -16 Left 2 !.param voutput 16
TEXT 2672 112 Left 2 !.param supplyK 0.06
TEXT 2704 -192 Left 2 !.param rser {(supplyVLT*supplyVLT*supplyK)/(2*supplyPWR)}
TEXT -16 -1584 Left 2 !.tran 0 {stoptime} 0 {timestep} startup
TEXT 2704 -160 Left 2 !.param phi 90
TEXT 3024 -16 Left 2 !.param con1_len 10
TEXT 2704 -224 Left 2 !KCON1 LVCC LSGND LGSPK2 LPGND LPWRGND1 LPWRGND2 LVEE LDGND 0.8
TEXT 3024 16 Left 2 !.param con2_len 10
TEXT 1920 -608 Left 2 !KCON2 LSPKP LSPKN2 0.8
TEXT 1904 -1072 Left 2 ;Konektor zvucnika i zvucnik
TEXT 2672 -1616 Left 2 ;Konektor napajanja, star ground i napajanje
TEXT 1744 -1616 Left 2 ;Negativna povratna sprega
TEXT 2672 -48 Left 2 ;Ulazni parametri kola
TEXT 1536 -1616 Center 2 ;AC sonda
TEXT 320 -1344 Left 2 !.lib usr/FCS_D.lib
TEXT 3024 48 Left 2 !.param BIAS 0.45
TEXT 320 -1248 Left 2 !.lib usr/ONNN_D.lib
TEXT 2288 -1176 Left 2 !.param knfb 1p
TEXT 1744 -1176 Left 2 !.param vinput voutput*(nfb1/nfb2)
TEXT 3024 112 Left 2 !.param nfb1 100
TEXT 3024 144 Left 2 !.param nfb2 1k8
TEXT 320 -1184 Left 2 !.lib usr/TSE_BJT.lib
TEXT 2672 144 Left 2 !.param rbd 22
RECTANGLE Normal 640 -1632 -32 -1392
RECTANGLE Normal 640 -1152 -32 -1360
RECTANGLE Normal 1344 -1632 672 -1392
RECTANGLE Normal 3328 176 2656 -64
RECTANGLE Normal 3840 -128 2656 -1376 2
RECTANGLE Normal 2592 -512 1888 -1088 2
RECTANGLE Normal 1664 -1152 1408 -1632 2
RECTANGLE Normal 3088 -784 2864 -1584 2
RECTANGLE Normal 2288 -656 2064 -1040 2
RECTANGLE Normal 2592 -1152 1728 -1632 2
