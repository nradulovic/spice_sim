Version 4
SHEET 1 6124 2336
WIRE 2272 -1536 2240 -1536
WIRE 2304 -1536 2272 -1536
WIRE 2416 -1536 2384 -1536
WIRE 2544 -1536 2496 -1536
WIRE 2592 -1536 2544 -1536
WIRE 2944 -1536 2912 -1536
WIRE 3056 -1536 3024 -1536
WIRE 3712 -1536 3136 -1536
WIRE 2272 -1520 2272 -1536
WIRE 2592 -1520 2592 -1536
WIRE 992 -1472 976 -1472
WIRE 1008 -1472 992 -1472
WIRE 992 -1456 992 -1472
WIRE 2272 -1424 2272 -1456
WIRE 2592 -1424 2592 -1440
WIRE 992 -1360 992 -1376
WIRE 992 -1344 992 -1360
WIRE 2944 -1344 2912 -1344
WIRE 3056 -1344 3024 -1344
WIRE 3424 -1344 3136 -1344
WIRE 2272 -1328 2272 -1344
WIRE 2272 -1328 2240 -1328
WIRE 2304 -1328 2272 -1328
WIRE 2416 -1328 2384 -1328
WIRE 2544 -1328 2496 -1328
WIRE 2592 -1328 2592 -1344
WIRE 2592 -1328 2544 -1328
WIRE 896 -1264 896 -1472
WIRE 1088 -1264 1088 -1472
WIRE 992 -1216 992 -1264
WIRE 1024 -1216 992 -1216
WIRE 2944 -1056 2912 -1056
WIRE 3056 -1056 3024 -1056
WIRE 3424 -1056 3424 -1264
WIRE 3424 -1056 3136 -1056
WIRE 2944 -864 2912 -864
WIRE 3056 -864 3024 -864
WIRE 3328 -864 3136 -864
WIRE 3424 -864 3424 -976
WIRE 3424 -864 3408 -864
WIRE 3440 -864 3424 -864
WIRE 3712 -864 3712 -1536
WIRE 3712 -864 3520 -864
WIRE 960 -848 960 -928
WIRE 960 -848 912 -848
WIRE 416 -736 128 -736
WIRE 608 -736 496 -736
WIRE 864 -736 864 -928
WIRE 880 -736 864 -736
WIRE 960 -736 960 -848
WIRE 960 -736 944 -736
WIRE 976 -736 960 -736
WIRE 1056 -736 1056 -928
WIRE 1056 -736 1040 -736
WIRE 3136 -672 3136 -864
WIRE 3136 -672 2944 -672
WIRE 3344 -672 3136 -672
WIRE 3424 -672 3424 -864
WIRE 3424 -672 3408 -672
WIRE 3440 -672 3424 -672
WIRE 3712 -672 3712 -864
WIRE 3712 -672 3504 -672
WIRE 3904 -672 3712 -672
WIRE 2944 -656 2944 -672
WIRE 3904 -656 3904 -672
WIRE 432 -640 320 -640
WIRE 608 -640 496 -640
WIRE 864 -640 864 -736
WIRE 880 -640 864 -640
WIRE 960 -640 960 -736
WIRE 960 -640 944 -640
WIRE 976 -640 960 -640
WIRE 1056 -640 1056 -736
WIRE 1056 -640 1040 -640
WIRE 128 -544 128 -736
WIRE 128 -544 32 -544
WIRE 144 -544 128 -544
WIRE 224 -544 208 -544
WIRE 320 -544 320 -640
WIRE 320 -544 304 -544
WIRE 416 -544 320 -544
WIRE 608 -544 496 -544
WIRE 2944 -480 2944 -592
WIRE 2944 -480 2912 -480
WIRE 2960 -480 2944 -480
WIRE 3424 -480 3424 -672
WIRE 3424 -480 3024 -480
WIRE 3824 -480 3424 -480
WIRE 3904 -480 3904 -592
WIRE 3904 -480 3888 -480
WIRE 3936 -480 3904 -480
WIRE -192 -464 -192 -512
WIRE 864 -448 864 -640
WIRE 1056 -448 1056 -640
WIRE 3136 -384 3136 -672
WIRE 3328 -384 3136 -384
WIRE 3712 -384 3712 -672
WIRE 3712 -384 3520 -384
WIRE -384 -368 -384 -384
WIRE -288 -368 -288 -384
WIRE -192 -368 -192 -384
WIRE 2944 -368 2944 -480
WIRE 3136 -368 3136 -384
WIRE 3328 -368 3328 -384
WIRE 3520 -368 3520 -384
WIRE 3712 -368 3712 -384
WIRE 3904 -368 3904 -480
WIRE 320 -304 320 -544
WIRE 704 -304 320 -304
WIRE -480 -272 -480 -304
WIRE -384 -272 -384 -288
WIRE -288 -272 -288 -288
WIRE -192 -272 -192 -288
WIRE 1136 -256 1120 -256
WIRE 1216 -256 1216 -352
WIRE 1312 -256 1312 -352
WIRE 1408 -256 1408 -448
WIRE 1408 -256 1392 -256
WIRE 1696 -256 1408 -256
WIRE 1712 -256 1696 -256
WIRE 1888 -256 1888 -448
WIRE 1888 -256 1792 -256
WIRE 1408 -240 1408 -256
WIRE 704 -208 320 -208
WIRE 3136 -192 3136 -304
WIRE 3712 -192 3712 -304
WIRE 3712 -192 3136 -192
WIRE -480 -176 -480 -192
WIRE -384 -176 -384 -192
WIRE -288 -176 -288 -192
WIRE -192 -176 -192 -192
WIRE 2944 -176 2944 -288
WIRE 3904 -176 3904 -288
WIRE 1696 -160 1696 -256
WIRE 1712 -160 1696 -160
WIRE 1792 -160 1792 -256
WIRE 1408 -144 1408 -160
WIRE 3328 -96 3328 -304
WIRE 3520 -96 3520 -304
WIRE 3520 -96 3328 -96
WIRE 3712 -96 3520 -96
WIRE 1408 -64 1408 -80
WIRE 2944 0 2944 -112
WIRE 2960 0 2944 0
WIRE 3424 0 3424 -480
WIRE 3424 0 3024 0
WIRE 3824 0 3424 0
WIRE 3904 0 3904 -112
WIRE 3904 0 3888 0
WIRE 144 32 48 32
WIRE 224 32 208 32
WIRE 320 32 320 -208
WIRE 320 32 304 32
WIRE 416 32 320 32
WIRE 512 32 496 32
WIRE 608 32 512 32
WIRE -384 80 -384 64
WIRE -288 80 -384 80
WIRE -288 96 -288 80
WIRE 3136 96 3136 -192
WIRE 3152 96 3136 96
WIRE 3344 96 3232 96
WIRE 3424 96 3424 0
WIRE 3424 96 3408 96
WIRE 3440 96 3424 96
WIRE 3616 96 3504 96
WIRE 3712 96 3712 -96
WIRE 3712 96 3696 96
WIRE 320 128 320 32
WIRE 336 128 320 128
WIRE 432 128 400 128
WIRE 512 128 512 32
WIRE 512 128 496 128
WIRE 2944 192 2944 0
WIRE 2960 192 2944 192
WIRE 3136 192 3136 96
WIRE 3136 192 3040 192
WIRE 3328 192 3136 192
WIRE 3424 192 3424 96
WIRE 3424 192 3408 192
WIRE 3440 192 3424 192
WIRE 3712 192 3712 96
WIRE 3712 192 3520 192
WIRE 3728 192 3712 192
WIRE 3904 192 3904 0
WIRE 3904 192 3808 192
WIRE -384 240 -384 160
WIRE -288 240 -288 160
WIRE -288 240 -384 240
WIRE -384 256 -384 240
FLAG 992 -1472 x
FLAG 1408 -448 out
IOPIN 1408 -448 Out
FLAG 992 -1360 xp
FLAG 1408 -64 pwrgnd
IOPIN 1408 -64 In
FLAG 48 32 sgnd
IOPIN 48 32 In
FLAG -384 -176 sgnd
IOPIN -384 -176 In
FLAG -384 -384 intermet
IOPIN -384 -384 Out
FLAG 2912 -1536 vcc
IOPIN 2912 -1536 Out
FLAG 2912 -864 vee
IOPIN 2912 -864 Out
FLAG 2912 -1344 gspk
IOPIN 2912 -1344 Out
FLAG 2912 -1056 pwrgnd
IOPIN 2912 -1056 Out
FLAG 608 32 out
IOPIN 608 32 In
FLAG 1888 -448 speaker
IOPIN 1888 -448 Out
FLAG 2240 -1536 speaker
IOPIN 2240 -1536 In
FLAG -288 -384 impulse
IOPIN -288 -384 Out
FLAG 896 -1264 AC1
IOPIN 896 -1264 BiDir
FLAG 1088 -1264 AC2
IOPIN 1088 -1264 BiDir
FLAG 1216 -352 AC1
IOPIN 1216 -352 BiDir
FLAG 1312 -352 AC2
IOPIN 1312 -352 BiDir
FLAG 2544 -1536 SPK+
FLAG 2544 -1328 SPK-
FLAG -192 -512 imd
IOPIN -192 -512 Out
FLAG -288 -176 sgnd
IOPIN -288 -176 In
FLAG -192 -176 sgnd
IOPIN -192 -176 In
FLAG -384 64 sgnd
IOPIN -384 64 In
FLAG 1056 -928 vee
IOPIN 1056 -928 In
FLAG 864 -928 vcc
IOPIN 864 -928 In
FLAG 960 -928 pwrgnd
IOPIN 960 -928 In
FLAG 1024 -1216 0
FLAG -384 256 pwrgnd
IOPIN -384 256 In
FLAG 912 -848 0
FLAG 608 -544 sgnd
IOPIN 608 -544 In
FLAG 2240 -1328 0
FLAG 608 -640 sgnd
IOPIN 608 -640 In
FLAG 2912 -480 hvee
IOPIN 2912 -480 Out
FLAG 3936 -480 hvcc
IOPIN 3936 -480 Out
FLAG -480 -176 sgnd
IOPIN -480 -176 In
FLAG -480 -304 sinus
IOPIN -480 -304 Out
FLAG 32 -544 sinus
IOPIN 32 -544 Out
FLAG 608 -736 sgnd
IOPIN 608 -736 In
SYMBOL res 320 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {nfb1}
SYMBOL voltage 3536 192 R90
WINDOW 123 0 0 Left 2
WINDOW 3 -94 177 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rser}
SYMATTR InstName V2
SYMBOL current 992 -1376 R180
WINDOW 0 24 77 Left 2
WINDOW 3 24 0 Invisible 2
WINDOW 123 -71 178 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii
SYMATTR Value 0
SYMATTR Value2 AC {u(prb)}
SYMBOL voltage 992 -1472 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 Invisible 2
WINDOW 123 -97 96 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi
SYMATTR Value 0
SYMATTR Value2 AC {u(-prb)}
SYMBOL ind2 1696 -240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName LTRF
SYMATTR Value 2µ
SYMATTR SpiceLine Rser=10m Rpar=3meg Cpar=1p
SYMATTR Type ind
SYMBOL res 1696 -144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 2.2
SYMBOL res 512 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value {nfb2}
SYMBOL voltage 992 -1472 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL schottky 3504 -304 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -14 -112 Left 2
SYMATTR InstName D6
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3120 -368 R0
WINDOW 3 -144 95 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D9
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage 3424 192 M270
WINDOW 123 0 0 Left 2
WINDOW 3 -96 -62 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rser}
SYMATTR InstName V3
SYMBOL res 1392 -256 R0
SYMATTR InstName R54
SYMATTR Value 10
SYMBOL voltage 992 -1360 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value 0
SYMATTR InstName V18
SYMBOL cap 1392 -144 R0
SYMATTR InstName C24
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL polcap 208 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1m
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=1110k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL schottky 3696 -304 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -112 -78 Left 2
SYMATTR InstName D10
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3312 -368 R0
WINDOW 3 -239 65 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D11
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL ind2 2928 -1520 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVCC
SYMATTR Value {con1_len*7n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2928 -848 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVEE
SYMATTR Value {con1_len*27n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL voltage -384 -288 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {vinput} {freq} 10m 10 0 5)
SYMATTR InstName V11
SYMBOL ind2 2928 -1328 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LGSPK2
SYMATTR Value {con1_len*17n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3152 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 25m
SYMBOL res 3152 -1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 25m
SYMBOL res 3152 -1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 15m
SYMBOL res 3152 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 25m
SYMBOL ind 3408 -1072 R0
SYMATTR InstName L4
SYMATTR Value 4n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3408 -1360 R0
SYMATTR InstName L6
SYMATTR Value 4n
SYMATTR SpiceLine Rser=1m
SYMBOL ind2 2288 -1520 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKP
SYMATTR Value {con2_len*7n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2288 -1312 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKN2
SYMATTR Value {con2_len*7n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL res 2512 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R41
SYMATTR Value 15m
SYMBOL res 2512 -1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 15m
SYMBOL voltage -288 -288 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {vinput} 1u 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V7
SYMBOL voltage -288 -384 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {-vinput} {1u+(1/(freq*2))} 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V8
SYMBOL voltage 1120 -256 R270
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL voltage 1408 -256 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 0
SYMBOL voltage -192 -288 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/3} 19k)
SYMATTR InstName V9
SYMBOL voltage -192 -384 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/3} 20k 0 0)
SYMATTR InstName V10
SYMBOL cap 3440 80 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C22
SYMATTR Value 470n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3344 80 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C23
SYMATTR Value 470n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL polcap 3408 -688 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C30
SYMATTR Value 10m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.055 Lser=20n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 3504 -688 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 10m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.055 Lser=20n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 3424 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R42
SYMATTR Value 10k
SYMBOL res 3536 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R46
SYMATTR Value 10k
SYMBOL polcap 880 -624 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C32
SYMATTR Value 220µ
SYMATTR SpiceLine V=63 Irms=2.77 Rser=0.070 Lser=4n Rpar=1900k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res -400 64 R0
SYMATTR InstName R49
SYMATTR Value 10
SYMBOL cap 2256 -1520 R0
SYMATTR InstName C11
SYMATTR Value 100n
SYMBOL res 2256 -1440 R0
SYMATTR InstName R40
SYMATTR Value 10
SYMBOL res 3248 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R45
SYMATTR Value .47
SYMBOL res 3712 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R50
SYMATTR Value .47
SYMBOL pab3bbb-compact-module 912 -256 R0
SYMATTR InstName X1
SYMBOL res 320 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {nfb1}
SYMBOL res 512 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {nfb2}
SYMBOL polcap 208 -528 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C13
SYMATTR Value 100µ
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=1110k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL cap 1040 -752 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 944 -752 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL voltage -192 -480 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/3} 60 0 0)
SYMATTR InstName V5
SYMBOL ind2 2928 -1040 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND
SYMATTR Value {con1_len*7n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL polcap 976 -624 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value 220µ
SYMATTR SpiceLine V=63 Irms=2.77 Rser=0.070 Lser=4n Rpar=1900k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL cap -304 96 R0
SYMATTR InstName C4
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 400 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10p
SYMBOL cap 496 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 10p
SYMBOL cap 496 -656 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 100p
SYMBOL diode 2960 16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value MURS120
SYMBOL diode 2928 -176 R0
SYMATTR InstName D2
SYMATTR Value MURS120
SYMBOL cap 3024 -496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 220µ
SYMBOL diode 3824 16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value MURS120
SYMBOL diode 3888 -112 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value MURS120
SYMBOL cap 3888 -496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C14
SYMATTR Value 220µ
SYMBOL diode 3888 -656 R0
SYMATTR InstName D7
SYMATTR Value MURS120
SYMBOL diode 2928 -592 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value MURS120
SYMBOL voltage 3056 192 M270
WINDOW 123 0 0 Left 2
WINDOW 3 -96 -62 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rser+14}
SYMATTR InstName V12
SYMBOL voltage 3824 192 R90
WINDOW 123 0 0 Left 2
WINDOW 3 -94 177 Invisible 2
SYMATTR Value SINE(0 {supplyVLT*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rser+14}
SYMATTR InstName V13
SYMBOL voltage -384 -384 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {vinput} {freq} 310m 10 0 5)
SYMATTR InstName V14
SYMBOL res 2928 -384 R0
SYMATTR InstName R7
SYMATTR Value 20
SYMBOL res 3888 -384 R0
SYMATTR InstName R8
SYMATTR Value 20
SYMBOL voltage -480 -288 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {vinput} {freq} 0 0 0 0)
SYMATTR InstName V15
SYMBOL res 2576 -1536 R0
SYMATTR InstName R9
SYMATTR Value {Zreal}
SYMBOL ind 2576 -1440 R0
SYMATTR InstName L1
SYMATTR Value {Zimg}
SYMBOL res 512 -752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
TEXT 144 -1488 Left 2 !;op
TEXT -560 -1344 Left 2 !.option plotwinsize=0
TEXT -560 -1312 Left 2 !.option noopiter
TEXT -560 -1616 Left 2 ;Transient
TEXT -560 -1456 Left 2 !.four {freq} 10 10 v(SPK+,SPK-)
TEXT 144 -1520 Left 2 !.param prb=0
TEXT -560 -1520 Left 2 !.param timestep={1/((65536/8)*freq)}
TEXT -560 -1552 Left 2 !.param freq=1k
TEXT -560 -1488 Left 2 !.param stoptime {iterations/freq}
TEXT 144 -1584 Left 2 ;.ac oct 100 10 100meg
TEXT 144 -1552 Left 2 ;.step param prb list -1 1
TEXT 144 -1616 Left 2 ;AC analysis
TEXT -560 -1424 Left 2 !.param iterations=6
TEXT 152 -1280 Left 2 !.param Zimp=6
TEXT 2144 -1216 Left 2 !.param Zreal Zimp/2
TEXT 2144 -1184 Left 2 !.param Zimg (Zimp*sqrt(3))/(4*pi*freq)
TEXT 152 -1248 Left 2 !.param supplyPWR=100
TEXT 152 -1216 Left 2 !.param supplyVLT=24
TEXT 152 -1312 Left 2 !.param voutput=25
TEXT 152 -1184 Left 2 !.param supplyK 0.06
TEXT 2832 304 Left 2 !.param rser {(supplyVLT*supplyVLT*supplyK)/(2*supplyPWR)}
TEXT -560 -1584 Left 2 !.tran 0 {stoptime} 100n {timestep}
TEXT 2832 336 Left 2 !.param phi=90
TEXT 504 -1312 Left 2 !.param con1_len=5
TEXT 504 -1280 Left 2 !.param con2_len 10
TEXT 2144 -1248 Left 2 !KCON2 LSPKP LSPKN2 0.8
TEXT 2128 -1616 Left 2 ;Konektor zvucnika i zvucnik
TEXT 2800 -1616 Left 2 ;Konektor napajanja, star ground i napajanje
TEXT 152 -1344 Left 2 ;Ulazni parametri kola
TEXT 992 -1616 Center 2 ;AC sonda
TEXT -224 -1344 Left 2 !.lib ../lib/FCS_D.lib
TEXT 504 -1248 Left 2 !.param BIAS=0.45
TEXT -560 -1280 Left 2 !.param vinput voutput*(nfb1/nfb2)
TEXT 504 -1216 Left 2 !.param nfb1=200
TEXT 504 -1184 Left 2 !.param nfb2=3k
TEXT 432 -40 Left 2 ;0.5W
TEXT 1488 -200 Left 2 ;1W
TEXT 1736 -104 Left 2 ;1W
RECTANGLE Normal 96 -1632 -576 -1392
RECTANGLE Normal 96 -1152 -576 -1360
RECTANGLE Normal 800 -1632 128 -1392
RECTANGLE Normal 2720 -1152 2112 -1632 2
RECTANGLE Normal 1120 -1152 864 -1632 2
RECTANGLE Normal 3168 -816 2928 -1584 2
RECTANGLE Normal 800 -1152 128 -1360
RECTANGLE Normal 4032 384 2784 -1632 2
