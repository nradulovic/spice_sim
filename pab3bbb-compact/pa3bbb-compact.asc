Version 4
SHEET 1 6124 2336
WIRE 2272 -1536 2240 -1536
WIRE 2384 -1536 2352 -1536
WIRE 2512 -1536 2464 -1536
WIRE 2560 -1536 2512 -1536
WIRE 2880 -1536 2848 -1536
WIRE 2992 -1536 2960 -1536
WIRE 3648 -1536 3072 -1536
WIRE 2560 -1520 2560 -1536
WIRE 2880 -1440 2848 -1440
WIRE 2992 -1440 2960 -1440
WIRE 3360 -1440 3072 -1440
WIRE 2560 -1424 2560 -1440
WIRE 2880 -1344 2848 -1344
WIRE 2992 -1344 2960 -1344
WIRE 3360 -1344 3360 -1360
WIRE 3360 -1344 3072 -1344
WIRE 2272 -1328 2240 -1328
WIRE 2384 -1328 2352 -1328
WIRE 2512 -1328 2464 -1328
WIRE 2560 -1328 2560 -1344
WIRE 2560 -1328 2512 -1328
WIRE 2880 -1248 2848 -1248
WIRE 2992 -1248 2960 -1248
WIRE 3360 -1248 3360 -1264
WIRE 3360 -1248 3072 -1248
WIRE 2864 -1152 2848 -1152
WIRE 2880 -1152 2864 -1152
WIRE 2992 -1152 2960 -1152
WIRE 3168 -1152 3072 -1152
WIRE -288 -1104 -288 -1120
WIRE -192 -1104 -192 -1120
WIRE 1280 -1056 512 -1056
WIRE 1568 -1056 1280 -1056
WIRE 1664 -1056 1568 -1056
WIRE 1760 -1056 1664 -1056
WIRE 1856 -1056 1760 -1056
WIRE 2864 -1056 2864 -1152
WIRE 2880 -1056 2864 -1056
WIRE 2992 -1056 2960 -1056
WIRE 3168 -1056 3168 -1152
WIRE 3168 -1056 3072 -1056
WIRE 3360 -1056 3360 -1168
WIRE 3360 -1056 3168 -1056
WIRE 512 -1040 512 -1056
WIRE 1280 -1040 1280 -1056
WIRE -384 -1008 -384 -1024
WIRE -288 -1008 -288 -1024
WIRE -192 -1008 -192 -1024
WIRE 1760 -960 1760 -1056
WIRE 1776 -960 1760 -960
WIRE 1856 -960 1840 -960
WIRE 2560 -928 2544 -928
WIRE 2576 -928 2560 -928
WIRE -480 -912 -480 -1024
WIRE -384 -912 -384 -928
WIRE -288 -912 -288 -928
WIRE -192 -912 -192 -928
WIRE 2560 -912 2560 -928
WIRE 1280 -864 1280 -960
WIRE 1280 -864 1088 -864
WIRE 1760 -864 1760 -960
WIRE 1776 -864 1760 -864
WIRE 1856 -864 1840 -864
WIRE 3360 -864 3360 -1056
WIRE 3376 -864 3360 -864
WIRE 3648 -864 3648 -1536
WIRE 3648 -864 3456 -864
WIRE 1280 -848 1280 -864
WIRE -480 -816 -480 -832
WIRE -384 -816 -384 -832
WIRE -288 -816 -288 -832
WIRE -192 -816 -192 -832
WIRE 2560 -816 2560 -832
WIRE 2560 -800 2560 -816
WIRE 1664 -720 1664 -1056
WIRE 2464 -720 2464 -928
WIRE 2656 -720 2656 -928
WIRE 800 -672 704 -672
WIRE 896 -672 880 -672
WIRE 912 -672 896 -672
WIRE 1008 -672 992 -672
WIRE 1280 -672 1280 -768
WIRE 1392 -672 1280 -672
WIRE 1600 -672 1472 -672
WIRE 704 -656 704 -672
WIRE 1568 -624 1568 -1056
WIRE 704 -576 704 -592
WIRE 1280 -576 1280 -672
WIRE 1392 -576 1280 -576
WIRE 1504 -576 1472 -576
WIRE 1280 -560 1280 -576
WIRE 224 -480 224 -576
WIRE 1568 -480 1568 -528
WIRE 1664 -480 1664 -624
WIRE 2432 -480 2144 -480
WIRE 3360 -480 3360 -864
WIRE 3552 -480 3360 -480
WIRE 3648 -480 3648 -864
WIRE 3648 -480 3632 -480
WIRE 1088 -464 1088 -864
WIRE 3360 -448 3360 -480
WIRE 896 -432 896 -672
WIRE 224 -384 224 -400
WIRE 320 -384 224 -384
WIRE 336 -384 320 -384
WIRE 416 -384 400 -384
WIRE 752 -384 416 -384
WIRE 832 -384 752 -384
WIRE 1088 -384 1088 -400
WIRE 1360 -384 1088 -384
WIRE 1568 -384 1568 -400
WIRE 1568 -384 1360 -384
WIRE 1664 -384 1664 -400
WIRE 1664 -384 1568 -384
WIRE 1760 -384 1664 -384
WIRE 1856 -384 1840 -384
WIRE 2144 -384 2144 -480
WIRE 2144 -384 2128 -384
WIRE 2240 -384 2144 -384
WIRE 2256 -384 2240 -384
WIRE 2336 -384 2320 -384
WIRE 2432 -384 2336 -384
WIRE 1280 -368 1280 -496
WIRE 1568 -368 1568 -384
WIRE 1664 -368 1664 -384
WIRE 2144 -368 2144 -384
WIRE 320 -288 320 -384
WIRE 416 -288 416 -384
WIRE 2240 -288 2240 -384
WIRE 2256 -288 2240 -288
WIRE 2336 -288 2336 -384
WIRE 2336 -288 2320 -288
WIRE 224 -272 224 -384
WIRE 1088 -272 1088 -384
WIRE 1280 -272 1280 -304
WIRE 2144 -272 2144 -288
WIRE 1568 -240 1568 -288
WIRE 224 -192 224 -208
WIRE 320 -192 320 -208
WIRE 512 -192 512 -960
WIRE 608 -192 512 -192
WIRE 1280 -192 1280 -208
WIRE 1392 -192 1280 -192
WIRE 1504 -192 1472 -192
WIRE 2144 -192 2144 -208
WIRE 512 -176 512 -192
WIRE 1664 -144 1664 -288
WIRE 416 -96 416 -208
WIRE 512 -96 416 -96
WIRE 1280 -96 1280 -192
WIRE 1392 -96 1280 -96
WIRE 1600 -96 1472 -96
WIRE 416 -80 416 -96
WIRE 512 -80 512 -96
WIRE 1280 -48 1280 -96
WIRE 416 0 416 -16
WIRE 896 0 896 -336
WIRE 1088 0 1088 -208
WIRE 1088 0 896 0
WIRE 1216 0 1088 0
WIRE 896 96 896 0
WIRE 608 112 608 -192
WIRE 608 192 608 176
WIRE 896 192 896 176
WIRE 896 192 608 192
WIRE 1280 192 1280 48
WIRE 1280 192 896 192
WIRE 1568 192 1568 -144
WIRE 1568 192 1280 192
WIRE 1664 192 1664 -48
WIRE 1664 192 1568 192
WIRE 1856 192 1664 192
FLAG 1856 -1056 vcc+
IOPIN 1856 -1056 In
FLAG 2560 -928 x
FLAG 2432 -480 out
IOPIN 2432 -480 Out
FLAG 2560 -816 xp
FLAG 2144 -192 pwrgnd
IOPIN 2144 -192 In
FLAG -480 -816 sgnd
IOPIN -480 -816 In
FLAG -480 -1024 sinus
IOPIN -480 -1024 Out
FLAG 2848 -1536 vcc+
IOPIN 2848 -1536 Out
FLAG 2848 -1344 gspk
IOPIN 2848 -1344 Out
FLAG 2848 -1248 pgnd
IOPIN 2848 -1248 Out
FLAG 2848 -1440 sgnd
IOPIN 2848 -1440 Out
FLAG 1008 -672 out
IOPIN 1008 -672 In
FLAG 2432 -384 SPKP
IOPIN 2432 -384 Out
FLAG 2240 -1328 gspk
IOPIN 2240 -1328 In
FLAG 2240 -1536 SPKP
IOPIN 2240 -1536 In
FLAG 2848 -1152 pwrgnd
IOPIN 2848 -1152 Out
FLAG 3360 -448 0
FLAG 2464 -720 AC1
IOPIN 2464 -720 BiDir
FLAG 2656 -720 AC2
IOPIN 2656 -720 BiDir
FLAG 1856 -384 AC1
IOPIN 1856 -384 BiDir
FLAG 2048 -384 AC2
IOPIN 2048 -384 BiDir
FLAG 2560 -720 pwrgnd
IOPIN 2560 -720 In
FLAG 2512 -1536 SPK+
FLAG 2512 -1328 SPK-
FLAG -288 -1120 imd
IOPIN -288 -1120 Out
FLAG 1856 -864 pwrgnd
IOPIN 1856 -864 In
FLAG -384 -816 sgnd
IOPIN -384 -816 In
FLAG -288 -816 sgnd
IOPIN -288 -816 In
FLAG 1360 -384 preout
FLAG 320 -192 sgnd
IOPIN 320 -192 In
FLAG 1856 -960 pwrgnd
IOPIN 1856 -960 In
FLAG -192 -1120 stability
IOPIN -192 -1120 Out
FLAG -192 -816 sgnd
IOPIN -192 -816 In
FLAG 1856 192 pwrgnd
IOPIN 1856 192 In
FLAG 224 -192 sgnd
IOPIN 224 -192 In
FLAG 704 -576 sgnd
IOPIN 704 -576 In
FLAG 512 0 sgnd
IOPIN 512 0 In
FLAG -384 -1024 impulse
IOPIN -384 -1024 Out
FLAG 752 -384 vin
FLAG 416 0 sgnd
IOPIN 416 0 In
FLAG 224 -576 sinus
IOPIN 224 -576 Out
DATAFLAG 1392 -1056 ""
DATAFLAG 1664 192 ""
DATAFLAG 1680 -384 ""
DATAFLAG 1280 32 "Ic(Q3)"
DATAFLAG 560 -192 ""
SYMBOL res 784 -656 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value {nfb1}
SYMBOL current 2560 -832 R180
WINDOW 0 24 77 Left 2
WINDOW 3 24 0 Invisible 2
WINDOW 123 -71 178 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii
SYMATTR Value 0
SYMATTR Value2 AC {u(prb)}
SYMBOL voltage 2560 -928 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 Invisible 2
WINDOW 123 -97 96 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi
SYMATTR Value 0
SYMATTR Value2 AC {u(-prb)}
SYMBOL pnp 832 -336 M180
WINDOW 0 77 84 Left 2
WINDOW 3 75 52 Left 2
SYMATTR InstName Q1
SYMATTR Value CA_BC560C
SYMBOL res 240 -384 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL res 880 80 R0
SYMATTR InstName R9
SYMATTR Value 620
SYMBOL res 1008 -688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {nfb2}
SYMBOL voltage 2560 -928 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL res 2128 -384 R0
SYMATTR InstName R17
SYMATTR Value 39
SYMBOL res 2544 -1536 R0
SYMATTR InstName Rzreal
SYMATTR Value {Zreal}
SYMBOL ind 2544 -1440 R0
SYMATTR InstName Lzimg
SYMATTR Value {Zimg}
SYMATTR SpiceLine Cpar=10p
SYMBOL voltage 2560 -816 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value 0
SYMATTR InstName V18
SYMBOL cap 1776 -880 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 100n
SYMATTR SpiceLine Rser=300m Lser=3n Rpar=4.4meg Cpar=1p
SYMBOL cap 2128 -272 R0
SYMATTR InstName C9
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL polcap 688 -656 R0
SYMATTR InstName C3
SYMATTR Value 2m2
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=3310k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL ind2 2864 -1520 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVCC
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL voltage -480 -928 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {vinput} {freq} 0 0 0)
SYMATTR InstName V11
SYMBOL ind2 2864 -1328 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LGSPK2
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1040 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND2
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1232 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2864 -1424 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSGND
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rvcc
SYMATTR Value 25m
SYMBOL res 3088 -1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rgspk2
SYMATTR Value 25m
SYMBOL res 3088 -1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rpwrgnd2
SYMATTR Value 25m
SYMBOL res 3088 -1264 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rpgnd
SYMATTR Value 25m
SYMBOL res 3088 -1456 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsgnd
SYMATTR Value 25m
SYMBOL ind 3344 -1264 R0
SYMATTR InstName Lpwrl1
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1360 R0
SYMATTR InstName Lpwrl2
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3344 -1456 R0
SYMATTR InstName Lpwrl3
SYMATTR Value 2n
SYMATTR SpiceLine Rser=1m
SYMBOL ind2 2256 -1520 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKP
SYMATTR Value {con2_len*20n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2256 -1312 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKN2
SYMATTR Value {con2_len*20n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL res 2480 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rspkp
SYMATTR Value 15m
SYMBOL res 2480 -1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rspkn
SYMATTR Value 15m
SYMBOL ind2 2864 -1136 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND1
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3088 -1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rpwrgnd1
SYMATTR Value 25m
SYMBOL voltage -384 -928 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {vinput/2} 1u 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V7
SYMBOL voltage -384 -1024 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {-vinput/2} {1u+(1/(freq*2))} 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V8
SYMBOL polcap 400 -368 M270
WINDOW 3 0 32 VBottom 2
WINDOW 0 32 32 VTop 2
SYMATTR Value 22µ
SYMATTR InstName C2
SYMATTR SpiceLine V=6.3 Irms=290m Rser=0.5 Lser=3n Rpar=2100k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL voltage 1744 -384 R270
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL voltage 2144 -384 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 0
SYMBOL voltage -288 -928 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/3} 19k)
SYMATTR InstName V9
SYMBOL voltage -288 -1024 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/3} 20k 0 0)
SYMATTR InstName V10
SYMBOL res 1552 -384 R0
SYMATTR InstName R16
SYMATTR Value .47
SYMBOL res 1552 -496 R0
SYMATTR InstName R15
SYMATTR Value .47
SYMBOL npn 1216 -48 R0
SYMATTR InstName Q3
SYMATTR Value 2SC3503F
SYMBOL cap 1072 -272 R0
SYMATTR InstName C6
SYMATTR Value 100p
SYMATTR SpiceLine Rser=.3 Lser=6n Rpar=3.9meg Cpar=1p
SYMBOL res 3472 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 10k
SYMBOL cap 208 -208 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value 4n7
SYMATTR SpiceLine Rser=.15 Lser=5n Rpar=3meg Cpar=2p
SYMBOL cap 1776 -976 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 22µ
SYMATTR SpiceLine Rser=80m Lser=6n Rpar=4.4meg Cpar=1p
SYMBOL voltage -192 -1120 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {7*vinput/8} {freq} 0 0 0)
SYMATTR InstName V13
SYMBOL voltage -192 -1024 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {-vinput/8} {1u+(1/(freq*80))} 1n 1n {1/(freq*80)} {1/(freq*40)})
SYMATTR InstName V5
SYMBOL voltage -192 -928 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {vinput/8} 1u 1n 1n {1/(freq*80)} {1/(freq*40)})
SYMATTR InstName V12
SYMBOL res 1264 -864 R0
SYMATTR InstName R13
SYMATTR Value 270
SYMBOL npn 1504 -624 R0
SYMATTR InstName Q6
SYMATTR Value CA_MJE15032C
SYMBOL res 1264 -1056 R0
SYMATTR InstName R12
SYMATTR Value 270
SYMBOL res 1488 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10
SYMBOL res 1488 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10
SYMBOL voltage 3648 -480 M270
WINDOW 123 24 -12 Left 2
WINDOW 3 24 -12 Invisible 2
SYMATTR Value {supplyVLT}
SYMATTR SpiceLine Rser={rser}
SYMATTR InstName V2
SYMBOL polcap 2256 -368 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C10
SYMATTR Value 2m2
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=3310k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 496 -96 R0
SYMATTR InstName R5
SYMATTR Value 9k1
SYMBOL res 496 -192 R0
SYMATTR InstName R4
SYMATTR Value 3k
SYMBOL zener 592 176 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value BZX84C12L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL polcap 1072 -464 R0
SYMATTR InstName C5
SYMATTR Value 2m2
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=3310k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 304 -304 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL polcap 2256 -272 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C11
SYMATTR Value 2m2
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=3310k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 496 -1056 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL pnp 1504 -144 M180
SYMATTR InstName Q2
SYMATTR Value CA_MJE15033C
SYMBOL diode 1264 -560 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode 1264 -272 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL polcap 400 -80 R0
SYMATTR InstName C4
SYMATTR Value 220µ
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=3310k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 400 -304 R0
SYMATTR InstName R6
SYMATTR Value 1k5
SYMBOL diode 1264 -368 R0
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL voltage -288 -1120 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/3} 3k5 0 0)
SYMATTR InstName V3
SYMBOL res 1648 -384 R0
SYMATTR InstName R10
SYMATTR Value .47
SYMBOL res 1648 -496 R0
SYMATTR InstName R19
SYMATTR Value .47
SYMBOL npn 1600 -720 R0
SYMATTR InstName Q4
SYMATTR Value CA_MJE15032C
SYMBOL pnp 1600 -48 M180
SYMATTR InstName Q5
SYMATTR Value CA_MJE15033C
SYMBOL res 1488 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 10
SYMBOL res 1488 -688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 10
TEXT -16 -1344 Left 2 !.option plotwinsize=0
TEXT -16 -1312 Left 2 !.option noopiter
TEXT -16 -1616 Left 2 ;Transient
TEXT -16 -1456 Left 2 !.four {freq} 10 10 v(SPK+,SPK-)
TEXT 688 -1520 Left 2 !.param prb=0
TEXT -16 -1520 Left 2 !.param timestep {1/((262144/8)*freq)}
TEXT -16 -1552 Left 2 !.param freq=1k
TEXT -16 -1488 Left 2 !.param stoptime {iterations/freq}
TEXT 688 -1552 Left 2 ;.step param prb list -1 1
TEXT 688 -1616 Left 2 ;AC analysis
TEXT -16 -1424 Left 2 !.param iterations 80
TEXT 320 -1280 Left 2 !.lib ../lib/ONNN_BJT.lib
TEXT 688 -1280 Left 2 !.param Zimp=8
TEXT 2096 -1184 Left 2 !.param Zreal Zimp/sqrt(2)
TEXT 2096 -1152 Left 2 !.param Zimg (Zimp/sqrt(2))/(2*pi*freq)
TEXT 688 -1248 Left 2 !.param supplyPWR 10
TEXT 688 -1216 Left 2 !.param supplyVLT=20
TEXT 320 -1216 Left 2 !.lib ../lib/STM_D.lib
TEXT 320 -1312 Left 2 !.lib ../lib/FCS_BJT.lib
TEXT 688 -1312 Left 2 !.param voutput=8
TEXT 688 -1184 Left 2 !.param supplyK 0.12
TEXT 2736 288 Left 2 !.param rser 0.1
TEXT -16 -1584 Left 2 !.tran 0 {stoptime} 0 {timestep}
TEXT 1040 -1312 Left 2 !.param con1_len 10
TEXT 2736 256 Left 2 !KCON1 LVCC LSGND LGSPK2 LPGND LPWRGND1 LPWRGND2 0.8
TEXT 1040 -1280 Left 2 !.param con2_len 10
TEXT 2096 -1216 Left 2 !KCON2 LSPKP LSPKN2 0.8
TEXT 2096 -1616 Left 2 ;Konektor zvucnika i zvucnik
TEXT 2752 -1616 Left 2 ;Konektor napajanja, star ground i napajanje
TEXT 688 -1344 Left 2 ;Ulazni parametri kola
TEXT 2560 -1072 Center 2 ;AC sonda
TEXT 320 -1344 Left 2 !.lib ../lib/FCS_D.lib
TEXT 1392 -1152 Left 2 !.param vinput voutput*(nfb1/nfb2)
TEXT 1040 -1216 Left 2 !.param nfb1=100
TEXT 1040 -1184 Left 2 !.param nfb2=1k2
TEXT 696 -1496 Left 2 ;.op
TEXT 696 -1576 Left 2 ;.ac oct 10 10 10e6
RECTANGLE Normal 640 -1632 -32 -1392
RECTANGLE Normal 640 -1152 -32 -1360
RECTANGLE Normal 1344 -1632 672 -1392
RECTANGLE Normal 2688 -1120 2080 -1632 2
RECTANGLE Normal 2688 -576 2432 -1088 2
RECTANGLE Normal 3088 -992 2864 -1584 2
RECTANGLE Normal 2480 -1280 2256 -1584 2
RECTANGLE Normal 2048 -1120 1376 -1632 2
RECTANGLE Normal 1344 -1360 672 -1152
RECTANGLE Normal 3808 352 2720 -1632 2
